# 新机安装记录

[[toc]]

## 1. Homebrew

### 1.1 安装：

安装 `XCode` 或者 `Command Line Tools for Xcode`。Xcode 可以从 AppStore 里下载安装，`Command Line Tools for Xcode` 需要在终端中输入以下代码运行安装：

```bash
xcode-select --install
```

[官网 https://brew.sh/index_zh-cn.html](https://brew.sh/index_zh-cn.html)

安装 Homebrew。将以下命令粘贴至终端

```bash
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

移除 Homebrew。将以下命令粘贴至终端

```bash
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)"
```

### 1.2 手动 clone

创建`homebrew-core`文件夹

1. 首先进入`homebrew`目录：
   ```bash
   cd "$(brew --repo)/Library/Taps/homebrew/"
   ```
2. 创建`homebrew-core`文件夹
   ```bash
   mkdir homebrew-core
   ```
3. 开始 clone
   ```bash
   git clone git://mirrors.ustc.edu.cn/homebrew-core.git /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core
   ```

### 1.3 Homebrew 换源

替换 homebrew 源

```bash
cd "$(brew --repo)"
git remote set-url origin https://mirrors.ustc.edu.cn/brew.git
```

替换 homebrew-core 源

```bash
cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"
git remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git
git -C "$(brew --repo homebrew/core)" remote set-url origin https://mirrors.ustc.edu.cn/homebrew-core.git
```

替换 homebrew-bottles 源

```bash
# bash用户
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' >> ~/.bash_profile

source ~/.bash_profile


# zsh 用户
echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' >> ~/.zshrc

source ~/.zshrc
```

更新 brew

```bash
cd
brew update
```

### 1.4 基本使用

```js
// 搜索包
brew search mysql

// 安装包
brew install mysql

// 查看包信息，比如目前的版本，依赖，安装后注意事项等
brew info mysql

// 卸载包
brew uninstall wget

// 显示已安装的包
brew list

// 查看brew的帮助
brew –help

// 更新， 这会更新 Homebrew 自己
brew update

// 检查过时（是否有新版本），这会列出所有安装的包里，哪些可以升级
brew outdated
brew outdated mysql

// 升级所有可以升级的软件们
brew upgrade
brew upgrade mysql

// 清理不需要的版本极其安装包缓存
brew cleanup
brew cleanup mysql
```

## 2. 扩展：Homebrew Cask

### 安装

```bash
brew install caskroom/cask/brew-cask

# or

```

### 使用

```bash
# 安装软件
brew cask install google-chrome
# or
brew install --cask google-chrome


# 卸载
brew cask uninstall google-chrome
# or
brew uninstall --cask google-chrom
```

## 安装 vs code

```bash
# 1 vs code
brew install --cask visual-studio-code

# 2
brew install --cask vscodium

brew cask install vscodium
```

## 3. 解决 github 项目 clone 报错 Failed connect to github.com:443 connection

直接去 [http://ping.chinaz.com](http://ping.chinaz.com) 找海外节点信息

选择 140.82.113.3

具体配置

```bash
vim /etc/hosts

# hosts写入
140.82.113.3 github.com

保存退出 :wq
```

## 4. oh-my-zsh

```bash
sh -c "$(wget https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh -0 -)"
```
