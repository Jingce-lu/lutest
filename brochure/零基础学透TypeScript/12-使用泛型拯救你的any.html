<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用泛型拯救你的any | Lu notes</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel=" " href=" ">
    <meta name="description" content=" ">
    
    <link rel="preload" href="/lutest/assets/css/0.styles.c5cda839.css" as="style"><link rel="preload" href="/lutest/assets/js/app.ebd1d23d.js" as="script"><link rel="preload" href="/lutest/assets/js/3.6f79f3df.js" as="script"><link rel="preload" href="/lutest/assets/js/4.2436b720.js" as="script"><link rel="preload" href="/lutest/assets/js/161.22043583.js" as="script"><link rel="prefetch" href="/lutest/assets/js/1.1cc44110.js"><link rel="prefetch" href="/lutest/assets/js/10.2ff953e2.js"><link rel="prefetch" href="/lutest/assets/js/100.d21da0b1.js"><link rel="prefetch" href="/lutest/assets/js/101.baee6874.js"><link rel="prefetch" href="/lutest/assets/js/102.a131df4d.js"><link rel="prefetch" href="/lutest/assets/js/103.bc2d83c4.js"><link rel="prefetch" href="/lutest/assets/js/104.55aba83c.js"><link rel="prefetch" href="/lutest/assets/js/105.34f83aee.js"><link rel="prefetch" href="/lutest/assets/js/106.f9b9a8dd.js"><link rel="prefetch" href="/lutest/assets/js/107.fb75706f.js"><link rel="prefetch" href="/lutest/assets/js/108.8162cb52.js"><link rel="prefetch" href="/lutest/assets/js/109.335aec84.js"><link rel="prefetch" href="/lutest/assets/js/11.be8389d9.js"><link rel="prefetch" href="/lutest/assets/js/110.6783d72e.js"><link rel="prefetch" href="/lutest/assets/js/111.32296bb2.js"><link rel="prefetch" href="/lutest/assets/js/112.f605d6b5.js"><link rel="prefetch" href="/lutest/assets/js/113.9dfc15c2.js"><link rel="prefetch" href="/lutest/assets/js/114.c2dd4c1c.js"><link rel="prefetch" href="/lutest/assets/js/115.8961136d.js"><link rel="prefetch" href="/lutest/assets/js/116.4b9a4b76.js"><link rel="prefetch" href="/lutest/assets/js/117.4a60375f.js"><link rel="prefetch" href="/lutest/assets/js/118.313841c7.js"><link rel="prefetch" href="/lutest/assets/js/119.cba1f6de.js"><link rel="prefetch" href="/lutest/assets/js/12.ffe23520.js"><link rel="prefetch" href="/lutest/assets/js/120.07a8f28b.js"><link rel="prefetch" href="/lutest/assets/js/121.e5a6dee9.js"><link rel="prefetch" href="/lutest/assets/js/122.04b20843.js"><link rel="prefetch" href="/lutest/assets/js/123.20b5817c.js"><link rel="prefetch" href="/lutest/assets/js/124.4e3bc7c0.js"><link rel="prefetch" href="/lutest/assets/js/125.ba63819b.js"><link rel="prefetch" href="/lutest/assets/js/126.9eb167aa.js"><link rel="prefetch" href="/lutest/assets/js/127.78d35f1e.js"><link rel="prefetch" href="/lutest/assets/js/128.f814450d.js"><link rel="prefetch" href="/lutest/assets/js/129.9fa697d6.js"><link rel="prefetch" href="/lutest/assets/js/13.767ad5e3.js"><link rel="prefetch" href="/lutest/assets/js/130.255283ff.js"><link rel="prefetch" href="/lutest/assets/js/131.e0065cd8.js"><link rel="prefetch" href="/lutest/assets/js/132.04ec8e1a.js"><link rel="prefetch" href="/lutest/assets/js/133.e920aac4.js"><link rel="prefetch" href="/lutest/assets/js/134.82b32064.js"><link rel="prefetch" href="/lutest/assets/js/135.d6b4975f.js"><link rel="prefetch" href="/lutest/assets/js/136.03fcaba8.js"><link rel="prefetch" href="/lutest/assets/js/137.a666b1a1.js"><link rel="prefetch" href="/lutest/assets/js/138.b842e61b.js"><link rel="prefetch" href="/lutest/assets/js/139.a2ad3760.js"><link rel="prefetch" href="/lutest/assets/js/14.c7f80a25.js"><link rel="prefetch" href="/lutest/assets/js/140.13d6ab3e.js"><link rel="prefetch" href="/lutest/assets/js/141.e6c566c5.js"><link rel="prefetch" href="/lutest/assets/js/142.58403d16.js"><link rel="prefetch" href="/lutest/assets/js/143.7521ee07.js"><link rel="prefetch" href="/lutest/assets/js/144.661c7349.js"><link rel="prefetch" href="/lutest/assets/js/145.982663fe.js"><link rel="prefetch" href="/lutest/assets/js/146.a44e9e61.js"><link rel="prefetch" href="/lutest/assets/js/147.2e9e5807.js"><link rel="prefetch" href="/lutest/assets/js/148.ac533762.js"><link rel="prefetch" href="/lutest/assets/js/149.1e08e983.js"><link rel="prefetch" href="/lutest/assets/js/15.fc7b9ab4.js"><link rel="prefetch" href="/lutest/assets/js/150.95d28dc6.js"><link rel="prefetch" href="/lutest/assets/js/151.56785bd1.js"><link rel="prefetch" href="/lutest/assets/js/152.3a3f24cd.js"><link rel="prefetch" href="/lutest/assets/js/153.807c7e0e.js"><link rel="prefetch" href="/lutest/assets/js/154.215e894d.js"><link rel="prefetch" href="/lutest/assets/js/155.de48c699.js"><link rel="prefetch" href="/lutest/assets/js/156.5ce189fd.js"><link rel="prefetch" href="/lutest/assets/js/157.0056b854.js"><link rel="prefetch" href="/lutest/assets/js/158.38c42e6b.js"><link rel="prefetch" href="/lutest/assets/js/159.9da47ebe.js"><link rel="prefetch" href="/lutest/assets/js/16.5fb031f0.js"><link rel="prefetch" href="/lutest/assets/js/160.0ede62a7.js"><link rel="prefetch" href="/lutest/assets/js/162.2932e118.js"><link rel="prefetch" href="/lutest/assets/js/163.3ee0dc6b.js"><link rel="prefetch" href="/lutest/assets/js/164.53d9bd26.js"><link rel="prefetch" href="/lutest/assets/js/165.4743e1b8.js"><link rel="prefetch" href="/lutest/assets/js/166.03917770.js"><link rel="prefetch" href="/lutest/assets/js/167.ab40a424.js"><link rel="prefetch" href="/lutest/assets/js/168.2dd2dc95.js"><link rel="prefetch" href="/lutest/assets/js/169.639a09a0.js"><link rel="prefetch" href="/lutest/assets/js/17.f146ab28.js"><link rel="prefetch" href="/lutest/assets/js/170.9330021e.js"><link rel="prefetch" href="/lutest/assets/js/171.12b45f30.js"><link rel="prefetch" href="/lutest/assets/js/172.4f439cac.js"><link rel="prefetch" href="/lutest/assets/js/173.cea1208f.js"><link rel="prefetch" href="/lutest/assets/js/174.44fdd364.js"><link rel="prefetch" href="/lutest/assets/js/175.c56b9a9d.js"><link rel="prefetch" href="/lutest/assets/js/176.6cba9443.js"><link rel="prefetch" href="/lutest/assets/js/177.51f7a624.js"><link rel="prefetch" href="/lutest/assets/js/178.6724f835.js"><link rel="prefetch" href="/lutest/assets/js/179.55060edc.js"><link rel="prefetch" href="/lutest/assets/js/18.2eb2e3bb.js"><link rel="prefetch" href="/lutest/assets/js/180.5c6aa03d.js"><link rel="prefetch" href="/lutest/assets/js/181.bfd11266.js"><link rel="prefetch" href="/lutest/assets/js/182.5c98cc60.js"><link rel="prefetch" href="/lutest/assets/js/183.531c3a75.js"><link rel="prefetch" href="/lutest/assets/js/184.ba313711.js"><link rel="prefetch" href="/lutest/assets/js/185.9f2ccd41.js"><link rel="prefetch" href="/lutest/assets/js/186.e3cf7ab6.js"><link rel="prefetch" href="/lutest/assets/js/187.2bd9c39b.js"><link rel="prefetch" href="/lutest/assets/js/188.5efe56c2.js"><link rel="prefetch" href="/lutest/assets/js/189.6c617798.js"><link rel="prefetch" href="/lutest/assets/js/19.93766500.js"><link rel="prefetch" href="/lutest/assets/js/190.95bac022.js"><link rel="prefetch" href="/lutest/assets/js/191.935efb12.js"><link rel="prefetch" href="/lutest/assets/js/192.5d7b01bf.js"><link rel="prefetch" href="/lutest/assets/js/193.4e0712de.js"><link rel="prefetch" href="/lutest/assets/js/194.a2d6490d.js"><link rel="prefetch" href="/lutest/assets/js/195.d3c682e9.js"><link rel="prefetch" href="/lutest/assets/js/196.bed64a26.js"><link rel="prefetch" href="/lutest/assets/js/197.95905734.js"><link rel="prefetch" href="/lutest/assets/js/198.9cf78938.js"><link rel="prefetch" href="/lutest/assets/js/199.22196020.js"><link rel="prefetch" href="/lutest/assets/js/20.db0a8ddb.js"><link rel="prefetch" href="/lutest/assets/js/200.89f273be.js"><link rel="prefetch" href="/lutest/assets/js/201.93d3f6fe.js"><link rel="prefetch" href="/lutest/assets/js/202.45b06b33.js"><link rel="prefetch" href="/lutest/assets/js/203.93ec4e0c.js"><link rel="prefetch" href="/lutest/assets/js/204.c3bd1cd6.js"><link rel="prefetch" href="/lutest/assets/js/205.118fb21c.js"><link rel="prefetch" href="/lutest/assets/js/206.c0170849.js"><link rel="prefetch" href="/lutest/assets/js/207.5d1f15b7.js"><link rel="prefetch" href="/lutest/assets/js/208.8e7bf216.js"><link rel="prefetch" href="/lutest/assets/js/209.c7ea67d4.js"><link rel="prefetch" href="/lutest/assets/js/21.9f255a67.js"><link rel="prefetch" href="/lutest/assets/js/210.c4ee63e6.js"><link rel="prefetch" href="/lutest/assets/js/211.a33d4a8a.js"><link rel="prefetch" href="/lutest/assets/js/212.593ace03.js"><link rel="prefetch" href="/lutest/assets/js/213.9e519031.js"><link rel="prefetch" href="/lutest/assets/js/214.fff03cb4.js"><link rel="prefetch" href="/lutest/assets/js/215.4370c0b4.js"><link rel="prefetch" href="/lutest/assets/js/216.41a18deb.js"><link rel="prefetch" href="/lutest/assets/js/217.ac80eab5.js"><link rel="prefetch" href="/lutest/assets/js/218.b7e21ca7.js"><link rel="prefetch" href="/lutest/assets/js/219.36ab4a6d.js"><link rel="prefetch" href="/lutest/assets/js/22.61118860.js"><link rel="prefetch" href="/lutest/assets/js/220.20a87e13.js"><link rel="prefetch" href="/lutest/assets/js/221.4f6cf5e4.js"><link rel="prefetch" href="/lutest/assets/js/222.d8c10255.js"><link rel="prefetch" href="/lutest/assets/js/223.9dadcc71.js"><link rel="prefetch" href="/lutest/assets/js/224.abc70a85.js"><link rel="prefetch" href="/lutest/assets/js/225.630efeec.js"><link rel="prefetch" href="/lutest/assets/js/226.6a16013f.js"><link rel="prefetch" href="/lutest/assets/js/227.54ac477a.js"><link rel="prefetch" href="/lutest/assets/js/228.0613864d.js"><link rel="prefetch" href="/lutest/assets/js/229.b46c0bb4.js"><link rel="prefetch" href="/lutest/assets/js/23.4801e669.js"><link rel="prefetch" href="/lutest/assets/js/230.99851e7c.js"><link rel="prefetch" href="/lutest/assets/js/231.0cb758cd.js"><link rel="prefetch" href="/lutest/assets/js/232.c75c975c.js"><link rel="prefetch" href="/lutest/assets/js/233.58e102cc.js"><link rel="prefetch" href="/lutest/assets/js/234.6e621cca.js"><link rel="prefetch" href="/lutest/assets/js/235.af91ffe1.js"><link rel="prefetch" href="/lutest/assets/js/236.aa7b5bb4.js"><link rel="prefetch" href="/lutest/assets/js/237.9759562f.js"><link rel="prefetch" href="/lutest/assets/js/238.ddcbb846.js"><link rel="prefetch" href="/lutest/assets/js/239.f6fedf2e.js"><link rel="prefetch" href="/lutest/assets/js/24.d9f96d86.js"><link rel="prefetch" href="/lutest/assets/js/240.89bad7ce.js"><link rel="prefetch" href="/lutest/assets/js/241.2bb2e533.js"><link rel="prefetch" href="/lutest/assets/js/242.2facd362.js"><link rel="prefetch" href="/lutest/assets/js/243.4273a51b.js"><link rel="prefetch" href="/lutest/assets/js/244.e1a79f41.js"><link rel="prefetch" href="/lutest/assets/js/245.7047db19.js"><link rel="prefetch" href="/lutest/assets/js/246.0bcbfd13.js"><link rel="prefetch" href="/lutest/assets/js/247.761c3d12.js"><link rel="prefetch" href="/lutest/assets/js/248.564d92cd.js"><link rel="prefetch" href="/lutest/assets/js/249.8bfbc3bc.js"><link rel="prefetch" href="/lutest/assets/js/25.38ffa021.js"><link rel="prefetch" href="/lutest/assets/js/250.9db83fa0.js"><link rel="prefetch" href="/lutest/assets/js/251.9e29cd98.js"><link rel="prefetch" href="/lutest/assets/js/252.46232f04.js"><link rel="prefetch" href="/lutest/assets/js/253.12665a80.js"><link rel="prefetch" href="/lutest/assets/js/254.bc763e10.js"><link rel="prefetch" href="/lutest/assets/js/255.51e2fceb.js"><link rel="prefetch" href="/lutest/assets/js/26.61eedfc1.js"><link rel="prefetch" href="/lutest/assets/js/27.262b1e42.js"><link rel="prefetch" href="/lutest/assets/js/28.c05c6191.js"><link rel="prefetch" href="/lutest/assets/js/29.1fd3ab2f.js"><link rel="prefetch" href="/lutest/assets/js/30.7fc64696.js"><link rel="prefetch" href="/lutest/assets/js/31.c05bd128.js"><link rel="prefetch" href="/lutest/assets/js/32.fa2080ce.js"><link rel="prefetch" href="/lutest/assets/js/33.90ad4444.js"><link rel="prefetch" href="/lutest/assets/js/34.f41c9b50.js"><link rel="prefetch" href="/lutest/assets/js/35.6c0645c2.js"><link rel="prefetch" href="/lutest/assets/js/36.42d6b1ba.js"><link rel="prefetch" href="/lutest/assets/js/37.94975372.js"><link rel="prefetch" href="/lutest/assets/js/38.9e05f896.js"><link rel="prefetch" href="/lutest/assets/js/39.b2e33d4f.js"><link rel="prefetch" href="/lutest/assets/js/40.b558ff04.js"><link rel="prefetch" href="/lutest/assets/js/41.7fc54cb5.js"><link rel="prefetch" href="/lutest/assets/js/42.77674c59.js"><link rel="prefetch" href="/lutest/assets/js/43.85dac72d.js"><link rel="prefetch" href="/lutest/assets/js/44.4755ac46.js"><link rel="prefetch" href="/lutest/assets/js/45.e5faa52c.js"><link rel="prefetch" href="/lutest/assets/js/46.a0bfd437.js"><link rel="prefetch" href="/lutest/assets/js/47.3b05e92d.js"><link rel="prefetch" href="/lutest/assets/js/48.19c61a76.js"><link rel="prefetch" href="/lutest/assets/js/49.dba95b21.js"><link rel="prefetch" href="/lutest/assets/js/5.6f57952d.js"><link rel="prefetch" href="/lutest/assets/js/50.ec1c8db4.js"><link rel="prefetch" href="/lutest/assets/js/51.279c48ec.js"><link rel="prefetch" href="/lutest/assets/js/52.50004cc9.js"><link rel="prefetch" href="/lutest/assets/js/53.89d7490c.js"><link rel="prefetch" href="/lutest/assets/js/54.7c9601ca.js"><link rel="prefetch" href="/lutest/assets/js/55.5da8ea72.js"><link rel="prefetch" href="/lutest/assets/js/56.3ddd5b57.js"><link rel="prefetch" href="/lutest/assets/js/57.4581a13f.js"><link rel="prefetch" href="/lutest/assets/js/58.32fefc1d.js"><link rel="prefetch" href="/lutest/assets/js/59.9e85ab43.js"><link rel="prefetch" href="/lutest/assets/js/6.b2c8eec7.js"><link rel="prefetch" href="/lutest/assets/js/60.64ab3593.js"><link rel="prefetch" href="/lutest/assets/js/61.d6a37605.js"><link rel="prefetch" href="/lutest/assets/js/62.381f6b44.js"><link rel="prefetch" href="/lutest/assets/js/63.fa58f38a.js"><link rel="prefetch" href="/lutest/assets/js/64.35fd9833.js"><link rel="prefetch" href="/lutest/assets/js/65.80555155.js"><link rel="prefetch" href="/lutest/assets/js/66.df6969ed.js"><link rel="prefetch" href="/lutest/assets/js/67.654d2c26.js"><link rel="prefetch" href="/lutest/assets/js/68.5fba8f43.js"><link rel="prefetch" href="/lutest/assets/js/69.88f51af3.js"><link rel="prefetch" href="/lutest/assets/js/7.04fc8669.js"><link rel="prefetch" href="/lutest/assets/js/70.d83d484b.js"><link rel="prefetch" href="/lutest/assets/js/71.52619ce8.js"><link rel="prefetch" href="/lutest/assets/js/72.38de7dbb.js"><link rel="prefetch" href="/lutest/assets/js/73.46d7b578.js"><link rel="prefetch" href="/lutest/assets/js/74.01cdf0a0.js"><link rel="prefetch" href="/lutest/assets/js/75.3f5c6723.js"><link rel="prefetch" href="/lutest/assets/js/76.1290445f.js"><link rel="prefetch" href="/lutest/assets/js/77.430ba314.js"><link rel="prefetch" href="/lutest/assets/js/78.5067d307.js"><link rel="prefetch" href="/lutest/assets/js/79.40e4e726.js"><link rel="prefetch" href="/lutest/assets/js/8.0b55fcd3.js"><link rel="prefetch" href="/lutest/assets/js/80.85afcd52.js"><link rel="prefetch" href="/lutest/assets/js/81.8e3a8854.js"><link rel="prefetch" href="/lutest/assets/js/82.8e763542.js"><link rel="prefetch" href="/lutest/assets/js/83.cfa7c44e.js"><link rel="prefetch" href="/lutest/assets/js/84.c63d37be.js"><link rel="prefetch" href="/lutest/assets/js/85.2779b01b.js"><link rel="prefetch" href="/lutest/assets/js/86.70e47826.js"><link rel="prefetch" href="/lutest/assets/js/87.8f1c4b6a.js"><link rel="prefetch" href="/lutest/assets/js/88.9b8a4114.js"><link rel="prefetch" href="/lutest/assets/js/89.562f3169.js"><link rel="prefetch" href="/lutest/assets/js/9.816e031f.js"><link rel="prefetch" href="/lutest/assets/js/90.deeae8d3.js"><link rel="prefetch" href="/lutest/assets/js/91.8c614725.js"><link rel="prefetch" href="/lutest/assets/js/92.570ebf03.js"><link rel="prefetch" href="/lutest/assets/js/93.4bd3d05f.js"><link rel="prefetch" href="/lutest/assets/js/94.286929df.js"><link rel="prefetch" href="/lutest/assets/js/95.18018c8f.js"><link rel="prefetch" href="/lutest/assets/js/96.8e645ebe.js"><link rel="prefetch" href="/lutest/assets/js/97.e6959e6f.js"><link rel="prefetch" href="/lutest/assets/js/98.46bbc6d3.js"><link rel="prefetch" href="/lutest/assets/js/99.4d53c140.js">
    <link rel="stylesheet" href="/lutest/assets/css/0.styles.c5cda839.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lutest/" class="home-link router-link-active"><!----> <span class="site-name">Lu notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lutest/" class="nav-link">首页</a></div><div class="nav-item"><a href="/lutest/prepare/" class="nav-link">Prepare</a></div><div class="nav-item"><a href="/lutest/js/" class="nav-link">Js</a></div><div class="nav-item"><a href="/lutest/collection/" class="nav-link">Collection</a></div><div class="nav-item"><a href="/lutest/study2020/" class="nav-link">study2020</a></div><div class="nav-item"><a href="/lutest/brochure/" class="nav-link router-link-active">技术小册</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lutest/" class="nav-link">首页</a></div><div class="nav-item"><a href="/lutest/prepare/" class="nav-link">Prepare</a></div><div class="nav-item"><a href="/lutest/js/" class="nav-link">Js</a></div><div class="nav-item"><a href="/lutest/collection/" class="nav-link">Collection</a></div><div class="nav-item"><a href="/lutest/study2020/" class="nav-link">study2020</a></div><div class="nav-item"><a href="/lutest/brochure/" class="nav-link router-link-active">技术小册</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/React：设计模式和最佳实践/" class="sidebar-heading clickable"><span>React：设计模式和最佳实践</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/Vue.js组件精讲/" class="sidebar-heading clickable"><span>Vue.js组件精讲</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/Vue3.0前瞻/" class="sidebar-heading clickable"><span>Vue3.0前瞻</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/中高级前端必备知识/" class="sidebar-heading clickable"><span>中高级前端必备知识</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/前端性能优化原理与实践/" class="sidebar-heading clickable"><span>前端性能优化原理与实践</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/源码分析/" class="sidebar-heading clickable"><span>源码分析</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/趣谈Linux/" class="sidebar-heading clickable"><span>趣谈Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/重学前端/" class="sidebar-heading clickable"><span>重学前端</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/brochure/零基础学透TypeScript/" class="sidebar-heading clickable open"><span>零基础学透TypeScript</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lutest/brochure/零基础学透TypeScript/0-前言.html" class="sidebar-link">0-前言</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/01-导读：Hello~TypeScript.html" class="sidebar-link">01-导读：Hello~TypeScript</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/02-TypeScript应该怎么学.html" class="sidebar-link">02-TypeScript应该怎么学</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/03-VSCode揭秘和搭建开发环境.html" class="sidebar-link">03-VSCode揭秘和搭建开发环境</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/04-八个JS中你见过的类型.html" class="sidebar-link">04-八个JS中你见过的类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/05-TS中补充的六个类型.html" class="sidebar-link">05-TS中补充的六个类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/06-Symbol-ES6新基础类型.html" class="sidebar-link">06-Symbol-ES6新基础类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/07-深入学习枚举.html" class="sidebar-link">07-深入学习枚举</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/08-使用类型断言达到预期.html" class="sidebar-link">08-使用类型断言达到预期</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/09-使用接口定义几乎任意结构.html" class="sidebar-link">09-使用接口定义几乎任意结构</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/10-接口的高阶用法.html" class="sidebar-link">10-接口的高阶用法</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/11-为函数和函数参数定义类型.html" class="sidebar-link">11-为函数和函数参数定义类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/12-使用泛型拯救你的any.html" class="active sidebar-link">12-使用泛型拯救你的any</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/lutest/brochure/零基础学透TypeScript/13-TS中的类，小心它与ES标准的差异.html" class="sidebar-link">13-TS中的类，小心它与ES标准的差异</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/14-类型推论，看TS有多懂你.html" class="sidebar-link">14-类型推论，看TS有多懂你</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/15-类型兼容性，开放心态满足灵活的JS.html" class="sidebar-link">15-类型兼容性，开放心态满足灵活的JS</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/16-使用类型保护让TS更聪明.html" class="sidebar-link">16-使用类型保护让TS更聪明</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/17-使用显式复制断言给TS一个你一定会赋值的承诺.html" class="sidebar-link">17-使用显式复制断言给TS一个你一定会赋值的承诺</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/18-类型别名和字面量类型—单调的类型.html" class="sidebar-link">18-类型别名和字面量类型—单调的类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/19-使用可辨识联合并保证每个case都被处理.html" class="sidebar-link">19-使用可辨识联合并保证每个case都被处理</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/20-this，类型？.html" class="sidebar-link">20-this，类型？</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/21-索引类型：获取索引类型和索引值类型.html" class="sidebar-link">21-索引类型：获取索引类型和索引值类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/22-使用映射类型得到新的类型.html" class="sidebar-link">22-使用映射类型得到新的类型</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/23-前面跳过的unkown类型详解.html" class="sidebar-link">23-前面跳过的unkown类型详解</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/24-条件类型，它不是三元操作符的写法吗？.html" class="sidebar-link">24-条件类型，它不是三元操作符的写法吗？</a></li><li><a href="/lutest/brochure/零基础学透TypeScript/25-入手装饰器，给凡人添加超能力.html" class="sidebar-link">25-入手装饰器，给凡人添加超能力</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="使用泛型拯救你的any"><a href="#使用泛型拯救你的any" class="header-anchor">#</a> 使用泛型拯救你的any</h3> <p>在前面的小节中我们学习了any类型，当我们要表示一个值可以为任意类型的时候，则指定它的类型为any，比如下面这个例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> getArray <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> any<span class="token punctuation">,</span> times<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这个函数接受两个参数。第一个参数为任意类型的值，第二个参数为数值类型的值，默认为 5。函数的功能是返回一个以 times 为元素个数，每个元素都是 value 的数组。这个函数我们从逻辑上可以知道，传入的 value 是什么类型，那么返回的数组的每个元素也应该是什么类型。</p> <p>接下来我们实际用一下这个函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">getArray</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我们调用了两次这个方法，使用 forEach 方法遍历得到的数组，在传入 forEach 的函数中获取当前遍历到的数组元素的 length 属性。第一次调用这个方法是没问题的，因为我们第一次传入的值为数组，得到的会是一个二维数组<code>[ [1], [1] ]</code>。每次遍历的元素为<code>[1]</code>，它也是数组，所以打印它的 length 属性是可以的。而我们第二次传入的是一个数字 2，生成的数组是<code>[2, 2, 2]</code>，访问 2 的 length 属性是没有的，所以应该报错，但是这里却不会报错，因为我们在定义<code>getArray</code>函数的时候，指定了返回值是<code>any</code>类型的元素组成的数组，所以这里遍历其返回值中每一个元素的时候，类型都是any，所以不管做任何操作都是可以的，因此，上面例子中第二次调用<code>getArray</code>的返回值每个元素应该是数值类型，遍历这个数组时我们获取数值类型的length属性也没报错，因为这里item的类型是any。</p> <p>所以要解决这种情况，泛型就可以搞定，接下来我们来学习泛型。</p> <h5 id="_2-9-1-简单使用"><a href="#_2-9-1-简单使用" class="header-anchor">#</a> 2.9.1. 简单使用</h5> <p>要解决上面这个场景的问题，就需要使用泛型了。泛型（Generics）是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性。</p> <p>还拿上面这个例子中的逻辑来举例，我们既要允许传入任意类型的值，又要正确指定返回值类型，就要使用泛型。我们先来看怎么改写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> getArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们在定义函数之前，使用<code>&lt;&gt;</code>符号定义了一个泛型变量 T，这个 T 在这次函数定义中就代表某一种类型，它可以是基础类型，也可以是联合类型等高级类型。定义了泛型变量之后，你在函数中任何需要指定类型的地方使用 T 都代表这一种类型。比如当我们传入 value 的类型为数值类型，那么返回的数组类型<code>T[]</code>就表示<code>number[]</code>。现在我们再来调用一下这个 getArray 函数：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>getArray<span class="token operator">&lt;</span>number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
getArray<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 类型“number”上不存在属性“length”</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我们在调用 getArray 的时候，在方法名后面使用<code>&lt;&gt;</code>传入了我们的泛型变量 T 的类型<code>number[]</code>，那么在定义 getArray 函数时使用 T 指定类型的地方，都会使用number<code>[]</code>指定。但是你也可以省略这个<code>&lt;number[]&gt;</code>，TypeScript 会根据你传入函数的 value 值的类型进行推断：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 类型“number”上不存在属性“length”</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h5 id="_2-9-2-泛型变量"><a href="#_2-9-2-泛型变量" class="header-anchor">#</a> 2.9.2. 泛型变量</h5> <p>当我们使用泛型的时候，你必须在处理类型涉及到泛型的数据的时候，把这个数据当做任意类型来处理。这就意味着不是所有类型都能做的操作不能做，不是所有类型都能调用的方法不能调用。可能会有点绕口，我们来看个例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> getLength <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> param<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// error 类型“T”上不存在属性“length”</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当我们获取一个类型为泛型的变量 param 的 length 属性值时，如果 param 的类型为数组 Array 或字符串 string 类型是没问题的，它们有 length 属性。但是如果此时传入的 param 是数值 number 类型，那这里就会有问题了。</p> <p>这里的<code>T</code>并不是固定的，你可以写为<code>A</code>、<code>B</code>或者其他名字，而且还可以在一个函数中定义多个泛型变量。我们来看个复杂点的例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> getArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>param1<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> param2<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">[</span>param1<span class="token punctuation">,</span> param2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error 类型“number”上不存在属性“length”</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error 属性“toFixed”在类型“string”上不存在</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这个例子中，我们定义了两个泛型变量<code>T</code>和<code>U</code>。第一个参数的类型为 T，第二个参数的类型为 U，最后函数返回一个二维数组，函数返回类型我们指定是一个元素类型为<code>[T, U]</code>的数组。所以当我们调用函数，最后遍历结果时，遍历到的每个元素都是一个第一个元素是数值类型、第二个元素是字符串类型的数组。</p> <h5 id="_2-9-3-泛型函数类型"><a href="#_2-9-3-泛型函数类型" class="header-anchor">#</a> 2.9.3. 泛型函数类型</h5> <p>我们可以定义一个泛型函数类型，还记得我们之前学习函数一节时，给一个函数定义函数类型，现在我们可以使用泛型定义函数类型：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ex1: 简单定义</span>
<span class="token keyword">const</span> getArray<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arg<span class="token punctuation">,</span> times</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// ex2: 使用类型别名</span>
type GetArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getArray<span class="token operator">:</span> GetArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>当然了，我们也可以使用接口的形式来定义泛型函数类型：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">GetArray</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> getArray<span class="token operator">:</span> GetArray <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>你还可以把接口中泛型变量提升到接口最外层，这样接口中所有属性和方法都能使用这个泛型变量了。我们先来看怎么用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">GetArray</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  tag<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> getArray<span class="token operator">:</span> GetArray<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> times<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// error 不能将类型“{ &lt;T&gt;(arg: T, times: number): T[]; tag: string; }”分配给类型“GetArray&lt;number&gt;”。</span>
  <span class="token comment">// 属性“tag”的类型不兼容。</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
getArray<span class="token punctuation">.</span>tag <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 不能将类型“&quot;a&quot;”分配给类型“number”</span>
<span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不能将类型“&quot;a&quot;”分配给类型“number”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上面例子中将泛型变量定义在接口最外层，所以不仅函数的类型中可以使用 T，在属性 tag 的定义中也可以使用。但在使用接口的时候，要在接口名后面明确传入一个类型，也就是这里的<code>GetArray&lt;number&gt;</code>，那么后面的 arg 和 tag 的类型都得是 number 类型。当然了，如果你还是希望 T 可以是任何类型，你可以把<code>GetArray&lt;number&gt;</code>换成<code>GetArray&lt;any&gt;</code>。</p> <h5 id="_2-9-4-泛型约束"><a href="#_2-9-4-泛型约束" class="header-anchor">#</a> 2.9.4 泛型约束</h5> <p>当我们使用了泛型时，就意味着这个这个类型是任意类型。但在大多数情况下，我们的逻辑是对特定类型处理的。还记得我们前面讲泛型变量时举的那个例子——当访问一个泛型类型的参数的 length 属性时，会报错&quot;类型“T”上不存在属性“length”&quot;，是因为并不是所有类型都有 length 属性。</p> <p>所以我们在这里应该对 T 有要求，那就是类型为 T 的值应该包含 length 属性。说到这个需求，你应该能想到接口的使用，我们可以使用接口定义一个对象必须有哪些属性：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">ValueWithLength</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> v<span class="token operator">:</span> ValueWithLength <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// error Property 'length' is missing in type '{}' but required in type 'ValueWithLength'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>泛型约束就是使用一个类型和<code>extends</code>对泛型进行约束，之前的例子就可以改为下面这样：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">ValueWithLength</span> <span class="token punctuation">{</span>
  length<span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> getLength <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">ValueWithLength</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>param<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> param<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getLength</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">{</span> length<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token function">getLength</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error 类型“123”的参数不能赋给类型“ValueWithLength”的参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这个例子中，泛型变量T受到约束。它必须满足接口ValueWithLength，也就是不管它是什么类型，但必须有一个length属性，且类型为数值类型。例子中后面四次调用getLength方法，传入了不同的值，传入字符串<code>&quot;abc&quot;</code>、数组<code>[1, 2, 3]</code>和一个包含length属性的对象<code>{ length: 3 }</code>都是可以的，但是传入数值<code>123</code>不行，因为它没有length属性。</p> <h5 id="_2-9-4-在泛型约束中使用类型参数"><a href="#_2-9-4-在泛型约束中使用类型参数" class="header-anchor">#</a> 2.9.4 在泛型约束中使用类型参数</h5> <p>当我们定义一个对象，想要对只能访问对象上存在的属性做要求时，该怎么办？先来看下这个需求是什么样子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> propName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> object<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">&quot;bb&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getProps</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当我们访问这个对象的’c’属性时，这个属性是没有的。这里我们需要用到索引类型<code>keyof</code>结合泛型来实现对这个问题的检查。索引类型在高级类型一节会详细讲解，这里你只要知道这个例子就可以了：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> getProp <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> propName<span class="token operator">:</span> <span class="token constant">K</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> object<span class="token punctuation">[</span>propName<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token string">&quot;bb&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">getProp</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 类型“&quot;c&quot;”的参数不能赋给类型“&quot;a&quot; | &quot;b&quot;”的参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这里我们使用让<code>K</code>来继承索引类型<code>keyof T</code>，你可以理解为<code>keyof T</code>相当于一个由泛型变量T的属性名构成的联合类型，在这里 K 就被约束为了只能是&quot;a&quot;或&quot;b&quot;，所以当我们传入字符串&quot;c&quot;想要获取对象obj的属性&quot;c&quot;时就会报错。</p> <h5 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h5> <p>本小节我们学习了泛型的相关知识；学习了使用泛型来弥补使用any造成的类型信息缺失；当我们的类型是灵活任意的，又要准确使用类型信息时，就需要使用泛型来关联类型信息，其中离不开的是泛型变量；泛型变量可以是多个，且命名随意；如果需要对泛型变量的类型做进一步的限制，则需要用到我们最后讲的泛型约束；使用泛型约束通过<code>extends</code>关键字指定要符合的类型，从而满足更多场景的需求。</p> <p>下个小节我们将学习类的知识，学习TypeScript中的类的知识之前，你需要先详细学习ES6标准中新增的类的知识，建议你先学习下阮一峰的<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener noreferrer">《ECMAScript 6 入门》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中类的部分。之所以要学习ES6中的类，是因为TypeScript中类的语法基本上是遵循ES6标准的，但是有一些区别，我们会在下个小节学习。</p> <p><img src="http://img.mukewang.com/5cf4c0120001489616000663.jpg" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lutest/brochure/零基础学透TypeScript/11-为函数和函数参数定义类型.html" class="prev">11-为函数和函数参数定义类型</a></span> <span class="next"><a href="/lutest/brochure/零基础学透TypeScript/13-TS中的类，小心它与ES标准的差异.html">13-TS中的类，小心它与ES标准的差异</a>
      →
    </span></p></div> </main> <span data-v-2ae0ee72></span></div><div class="global-ui"></div></div>
    <script src="/lutest/assets/js/app.ebd1d23d.js" defer></script><script src="/lutest/assets/js/3.6f79f3df.js" defer></script><script src="/lutest/assets/js/4.2436b720.js" defer></script><script src="/lutest/assets/js/161.22043583.js" defer></script>
  </body>
</html>
