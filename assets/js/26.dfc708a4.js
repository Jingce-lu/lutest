(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{461:function(v,t,_){"use strict";_.r(t);var a=_(42),s=Object(a.a)({},(function(){var v=this,t=v.$createElement,_=v._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"技术小册"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#技术小册"}},[v._v("#")]),v._v(" 技术小册")]),v._v(" "),_("BrochureList"),v._v(" "),_("h2",{attrs:{id:"yarn-vs-npm-vs-cnpm"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#yarn-vs-npm-vs-cnpm"}},[v._v("#")]),v._v(" yarn vs npm vs cnpm")]),v._v(" "),_("p",[v._v("测试均采用公司网络，网速极好时进行。taoche项目。网络有限制时npm安装成功率较低。")]),v._v(" "),_("table",[_("thead",[_("tr",[_("th"),v._v(" "),_("th",[v._v("npm v3.x")]),v._v(" "),_("th",[v._v("npm v5.x")]),v._v(" "),_("th",[v._v("cnpm(5.x)")]),v._v(" "),_("th",[v._v("yarn")])])]),v._v(" "),_("tbody",[_("tr",[_("td",[v._v("是否锁依赖版本")]),v._v(" "),_("td",[v._v("否(手动)")]),v._v(" "),_("td",[v._v("是")]),v._v(" "),_("td",[v._v("否(手动)")]),v._v(" "),_("td",[v._v("是")])]),v._v(" "),_("tr",[_("td",[v._v("版本锁文件")]),v._v(" "),_("td",[v._v("无")]),v._v(" "),_("td",[v._v("package-lock.json")]),v._v(" "),_("td",[v._v("无")]),v._v(" "),_("td",[v._v("yarn.lock")])]),v._v(" "),_("tr",[_("td",[v._v("版本锁机制")]),v._v(" "),_("td",[v._v("无")]),v._v(" "),_("td",[v._v("package-lock.json优先")]),v._v(" "),_("td",[v._v("无")]),v._v(" "),_("td",[v._v("yarn.lock优先")])]),v._v(" "),_("tr",[_("td",[v._v("安装依赖速度")]),v._v(" "),_("td",[v._v("极慢")]),v._v(" "),_("td",[v._v("慢")]),v._v(" "),_("td",[v._v("极快")]),v._v(" "),_("td",[v._v("快")])]),v._v(" "),_("tr",[_("td",[v._v("依赖目录结构")]),v._v(" "),_("td",[v._v("平铺")]),v._v(" "),_("td",[v._v("平铺")]),v._v(" "),_("td",[v._v("软链")]),v._v(" "),_("td",[v._v("平铺")])]),v._v(" "),_("tr",[_("td",[v._v("初次安装(非淘宝源)")]),v._v(" "),_("td",[v._v("failed")]),v._v(" "),_("td",[v._v("failed")]),v._v(" "),_("td",[v._v("34s")]),v._v(" "),_("td",[v._v("failed")])]),v._v(" "),_("tr",[_("td",[v._v("初次安装(node-sass源)")]),v._v(" "),_("td",[v._v("11m+")]),v._v(" "),_("td",[v._v("5m56s")]),v._v(" "),_("td",[v._v("34s")]),v._v(" "),_("td",[v._v("66s")])]),v._v(" "),_("tr",[_("td",[v._v("重复安装")]),v._v(" "),_("td",[v._v("2m+")]),v._v(" "),_("td",[v._v("25s")]),v._v(" "),_("td",[v._v("19s")]),v._v(" "),_("td",[v._v("24s")])]),v._v(" "),_("tr",[_("td",[v._v("项目兼容性")]),v._v(" "),_("td",[v._v("好")]),v._v(" "),_("td",[v._v("好")]),v._v(" "),_("td",[v._v("差")]),v._v(" "),_("td",[v._v("好")])]),v._v(" "),_("tr",[_("td",[v._v("是否可更新依赖")]),v._v(" "),_("td",[v._v("手动")]),v._v(" "),_("td",[v._v("手动")]),v._v(" "),_("td",[v._v("否")]),v._v(" "),_("td",[v._v("是")])])])]),v._v(" "),_("h3",{attrs:{id:"说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[v._v("#")]),v._v(" 说明")]),v._v(" "),_("ul",[_("li",[v._v("完全使用"),_("code",[v._v("cnpm")]),v._v("会有以下问题:\n"),_("ul",[_("li",[v._v("本地项目构建会将vue/react等dll模块构建进去")]),v._v(" "),_("li",[v._v("公司内部模块升级需要手动删除node_modules下模块目录和软链接，重新cnpm")])])]),v._v(" "),_("li",[_("code",[v._v("node-sass")]),v._v(" 依赖包在不配源的情况下，非cnpm版本都极容易安装不了failed")]),v._v(" "),_("li",[v._v("版本锁定机制的不同，导致npm5.x一旦安装需要手动升级，才能更新lock文件, yarn执行后会同步当前package.json到yarn.lock并更换为与package.json中不同的依赖包")])]),v._v(" "),_("h3",{attrs:{id:"自动配置npm及yarn源-推荐"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#自动配置npm及yarn源-推荐"}},[v._v("#")]),v._v(" 自动配置npm及yarn源[推荐]")]),v._v(" "),_("p",[v._v("将如下代码在命令行中执行(不支持windows cmd)")]),v._v(" "),_("p",[_("code",[v._v("curl -s http://git.taoche.com/npm/install_env/raw/master/install.sh | sh")])]),v._v(" "),_("h3",{attrs:{id:"手动配置淘宝源"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#手动配置淘宝源"}},[v._v("#")]),v._v(" 手动配置淘宝源")]),v._v(" "),_("p",[v._v("yarn:")]),v._v(" "),_("p",[_("code",[v._v("yarn config set registry https://registry.npm.taobao.org")])]),v._v(" "),_("p",[v._v("npm:")]),v._v(" "),_("p",[_("code",[v._v("npm config set registry https://registry.npm.taobao.org")])]),v._v(" "),_("h3",{attrs:{id:"手动配置node-sass源"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#手动配置node-sass源"}},[v._v("#")]),v._v(" 手动配置node-sass源")]),v._v(" "),_("p",[v._v("yarn:")]),v._v(" "),_("p",[_("code",[v._v("yarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass")])]),v._v(" "),_("p",[v._v("npm:")]),v._v(" "),_("p",[_("code",[v._v("npm config set sass-binary-site http://cdn.npm.taobao.org/dist/node-sass")])]),v._v(" "),_("h3",{attrs:{id:"更多请参考"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#更多请参考"}},[v._v("#")]),v._v(" 更多请参考")]),v._v(" "),_("p",[v._v("https://sebastianblade.com/the-truly-way-to-install-upgrade-npm-dependency-in-china/")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);