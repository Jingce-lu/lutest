<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020 最新：100 道有答案的前端面试题（上） | Lu notes</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel=" " href=" ">
    <meta name="description" content=" ">
    <link rel="preload" href="/lutest/assets/css/0.styles.00f0fbde.css" as="style"><link rel="preload" href="/lutest/assets/js/app.3882172a.js" as="script"><link rel="preload" href="/lutest/assets/js/3.8fcedd8d.js" as="script"><link rel="preload" href="/lutest/assets/js/4.4841ff63.js" as="script"><link rel="preload" href="/lutest/assets/js/53.25edc77d.js" as="script"><link rel="prefetch" href="/lutest/assets/js/1.4cacbe98.js"><link rel="prefetch" href="/lutest/assets/js/10.f1f098f5.js"><link rel="prefetch" href="/lutest/assets/js/11.0593daa6.js"><link rel="prefetch" href="/lutest/assets/js/12.23dcb52e.js"><link rel="prefetch" href="/lutest/assets/js/13.ce60e988.js"><link rel="prefetch" href="/lutest/assets/js/14.91d797b2.js"><link rel="prefetch" href="/lutest/assets/js/15.fb48b6d0.js"><link rel="prefetch" href="/lutest/assets/js/16.9f7bb8a2.js"><link rel="prefetch" href="/lutest/assets/js/17.8dc0aa26.js"><link rel="prefetch" href="/lutest/assets/js/18.04273e9d.js"><link rel="prefetch" href="/lutest/assets/js/19.d616612c.js"><link rel="prefetch" href="/lutest/assets/js/20.97a9b121.js"><link rel="prefetch" href="/lutest/assets/js/21.8e61bfc4.js"><link rel="prefetch" href="/lutest/assets/js/22.f385727b.js"><link rel="prefetch" href="/lutest/assets/js/23.5037f669.js"><link rel="prefetch" href="/lutest/assets/js/24.fb83a0ab.js"><link rel="prefetch" href="/lutest/assets/js/25.9d80dac9.js"><link rel="prefetch" href="/lutest/assets/js/26.59aaa92a.js"><link rel="prefetch" href="/lutest/assets/js/27.4d4c2100.js"><link rel="prefetch" href="/lutest/assets/js/28.8dcca59a.js"><link rel="prefetch" href="/lutest/assets/js/29.a2d39adf.js"><link rel="prefetch" href="/lutest/assets/js/30.773e40bd.js"><link rel="prefetch" href="/lutest/assets/js/31.f2c89ae2.js"><link rel="prefetch" href="/lutest/assets/js/32.bc3613b7.js"><link rel="prefetch" href="/lutest/assets/js/33.8c87bffb.js"><link rel="prefetch" href="/lutest/assets/js/34.b097b239.js"><link rel="prefetch" href="/lutest/assets/js/35.f8b4498a.js"><link rel="prefetch" href="/lutest/assets/js/36.6a600ae3.js"><link rel="prefetch" href="/lutest/assets/js/37.b83a1be1.js"><link rel="prefetch" href="/lutest/assets/js/38.c1fdbe71.js"><link rel="prefetch" href="/lutest/assets/js/39.d395baac.js"><link rel="prefetch" href="/lutest/assets/js/40.ea7e8a49.js"><link rel="prefetch" href="/lutest/assets/js/41.cd31e71a.js"><link rel="prefetch" href="/lutest/assets/js/42.28cb5c0f.js"><link rel="prefetch" href="/lutest/assets/js/43.c328d352.js"><link rel="prefetch" href="/lutest/assets/js/44.02d316f5.js"><link rel="prefetch" href="/lutest/assets/js/45.dcafe391.js"><link rel="prefetch" href="/lutest/assets/js/46.5a444133.js"><link rel="prefetch" href="/lutest/assets/js/47.6a212024.js"><link rel="prefetch" href="/lutest/assets/js/48.319b2ae4.js"><link rel="prefetch" href="/lutest/assets/js/49.6bd02b08.js"><link rel="prefetch" href="/lutest/assets/js/5.496ea072.js"><link rel="prefetch" href="/lutest/assets/js/50.c29cb93a.js"><link rel="prefetch" href="/lutest/assets/js/51.223345ef.js"><link rel="prefetch" href="/lutest/assets/js/52.9f1900fa.js"><link rel="prefetch" href="/lutest/assets/js/54.e0d0347d.js"><link rel="prefetch" href="/lutest/assets/js/55.db359337.js"><link rel="prefetch" href="/lutest/assets/js/56.56745096.js"><link rel="prefetch" href="/lutest/assets/js/57.c38549c8.js"><link rel="prefetch" href="/lutest/assets/js/58.1f63f495.js"><link rel="prefetch" href="/lutest/assets/js/59.7f48351b.js"><link rel="prefetch" href="/lutest/assets/js/6.a6b1060b.js"><link rel="prefetch" href="/lutest/assets/js/60.fcf96306.js"><link rel="prefetch" href="/lutest/assets/js/61.a70a0e68.js"><link rel="prefetch" href="/lutest/assets/js/62.67a9126b.js"><link rel="prefetch" href="/lutest/assets/js/63.fd5da190.js"><link rel="prefetch" href="/lutest/assets/js/64.9756fabd.js"><link rel="prefetch" href="/lutest/assets/js/65.69cb185f.js"><link rel="prefetch" href="/lutest/assets/js/66.4a03e294.js"><link rel="prefetch" href="/lutest/assets/js/67.c2a5b4fb.js"><link rel="prefetch" href="/lutest/assets/js/68.cfcae804.js"><link rel="prefetch" href="/lutest/assets/js/69.5d4251fa.js"><link rel="prefetch" href="/lutest/assets/js/7.3426c532.js"><link rel="prefetch" href="/lutest/assets/js/70.83312bd2.js"><link rel="prefetch" href="/lutest/assets/js/71.37923f99.js"><link rel="prefetch" href="/lutest/assets/js/72.d36df5ef.js"><link rel="prefetch" href="/lutest/assets/js/73.2328d9e0.js"><link rel="prefetch" href="/lutest/assets/js/74.e0a67b9e.js"><link rel="prefetch" href="/lutest/assets/js/75.b397dc79.js"><link rel="prefetch" href="/lutest/assets/js/76.68bf9852.js"><link rel="prefetch" href="/lutest/assets/js/77.9dffeeaf.js"><link rel="prefetch" href="/lutest/assets/js/78.b4699e6c.js"><link rel="prefetch" href="/lutest/assets/js/79.4d87305a.js"><link rel="prefetch" href="/lutest/assets/js/8.047d12ca.js"><link rel="prefetch" href="/lutest/assets/js/80.ee1d31ab.js"><link rel="prefetch" href="/lutest/assets/js/81.4a8664c1.js"><link rel="prefetch" href="/lutest/assets/js/82.b709266c.js"><link rel="prefetch" href="/lutest/assets/js/83.27663425.js"><link rel="prefetch" href="/lutest/assets/js/84.8842643a.js"><link rel="prefetch" href="/lutest/assets/js/85.43752092.js"><link rel="prefetch" href="/lutest/assets/js/86.42e6bd29.js"><link rel="prefetch" href="/lutest/assets/js/87.cb9eabfa.js"><link rel="prefetch" href="/lutest/assets/js/88.27fbf6de.js"><link rel="prefetch" href="/lutest/assets/js/89.3348a4a4.js"><link rel="prefetch" href="/lutest/assets/js/9.7845f204.js"><link rel="prefetch" href="/lutest/assets/js/90.f771b1b7.js"><link rel="prefetch" href="/lutest/assets/js/91.ed25cf83.js"><link rel="prefetch" href="/lutest/assets/js/92.482e6162.js">
    <link rel="stylesheet" href="/lutest/assets/css/0.styles.00f0fbde.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lutest/" class="home-link router-link-active"><!----> <span class="site-name">Lu notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lutest/" class="nav-link">首页</a></div><div class="nav-item"><a href="/lutest/prepare/" class="nav-link router-link-active">Prepare</a></div><div class="nav-item"><a href="/lutest/js/" class="nav-link">Js</a></div><div class="nav-item"><a href="/lutest/collection/" class="nav-link">Collection</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lutest/" class="nav-link">首页</a></div><div class="nav-item"><a href="/lutest/prepare/" class="nav-link router-link-active">Prepare</a></div><div class="nav-item"><a href="/lutest/js/" class="nav-link">Js</a></div><div class="nav-item"><a href="/lutest/collection/" class="nav-link">Collection</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/prepare/Collection/" class="sidebar-heading clickable router-link-active open"><span>Collection</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/lutest/prepare/Collection/01-几个让我印象深刻的面试题.html" class="sidebar-link">01-几个让我印象深刻的面试题</a></li><li><a href="/lutest/prepare/Collection/02-全面整理.html" class="sidebar-link">02-全面整理</a></li><li><a href="/lutest/prepare/Collection/03-100面试题上.html" class="active sidebar-link">03-100面试题上</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_1-1-写一个-mysetinterval-fn-a-b-每次间隔-a-a-b-a-2b-的时间，然后写一个-myclear，停止上面的-mysetinterval" class="sidebar-link">1. 1.写一个 mySetInterVal(fn, a, b),每次间隔 a,a+b,a+2b 的时间，然后写一个 myClear，停止上面的 mySetInterVal</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_2-合并二维有序数组成一维有序数组，归并排序的思路" class="sidebar-link">2.合并二维有序数组成一维有序数组，归并排序的思路</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_3-多种方式实现斐波那契数列" class="sidebar-link">3.多种方式实现斐波那契数列</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_4-字符串出现的不重复最长长度" class="sidebar-link">4.字符串出现的不重复最长长度</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_5-介绍-chrome-浏览器的几个版本" class="sidebar-link">5.介绍 chrome 浏览器的几个版本</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_6-react-项目中有哪些细节可以优化？实际开发中都做过哪些性能优化" class="sidebar-link">6.React 项目中有哪些细节可以优化？实际开发中都做过哪些性能优化</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_7-react-最新版本解决了什么问题-加了哪些东西" class="sidebar-link">7.react 最新版本解决了什么问题 加了哪些东西</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_8-说一下-http-缓存策略，有什么区别，分别解决了什么问题" class="sidebar-link">8.说一下 Http 缓存策略，有什么区别，分别解决了什么问题</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_9-介绍防抖节流原理、区别以及应用，并用-javascript-进行实现" class="sidebar-link">9.介绍防抖节流原理、区别以及应用，并用 JavaScript 进行实现</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_10-前端安全、中间人攻击" class="sidebar-link">10.前端安全、中间人攻击</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_11-对闭包的看法，为什么要用闭包？说一下闭包原理以及应用场景" class="sidebar-link">11.对闭包的看法，为什么要用闭包？说一下闭包原理以及应用场景</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_12-css-伪类与伪元素区别" class="sidebar-link">12.css 伪类与伪元素区别</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_13-有一堆整数，请把他们分成三份，确保每一份和尽量相等（11，42，23，4，5，6-4-5-6-11-23-42-56-78-90）" class="sidebar-link">13.有一堆整数，请把他们分成三份，确保每一份和尽量相等（11，42，23，4，5，6 4 5 6 11 23 42 56 78 90）</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_14-实现-lodash-的-get" class="sidebar-link">14.实现 lodash 的_.get</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_15-实现-add-1-2-3" class="sidebar-link">15.实现 add(1)(2)(3)</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_16-实现链式调用" class="sidebar-link">16.实现链式调用</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_17-react-事件绑定原理" class="sidebar-link">17.React 事件绑定原理</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_18-类数组和数组的区别，dom-的类数组如何转换成数组" class="sidebar-link">18.类数组和数组的区别，dom 的类数组如何转换成数组</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_19-webpack-做过哪些优化，开发效率方面、打包策略方面等等" class="sidebar-link">19.webpack 做过哪些优化，开发效率方面、打包策略方面等等</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_20-说一下事件循环机制-node、浏览器" class="sidebar-link">20.说一下事件循环机制(node、浏览器)</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_21-如何封装-node-中间件" class="sidebar-link">21.如何封装 node 中间件</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_22-node-中间层怎样做的请求合并转发" class="sidebar-link">22.node 中间层怎样做的请求合并转发</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_23-介绍下-promise-的特性、优缺点，内部是如何实现的，动手实现-promise" class="sidebar-link">23.介绍下 promise 的特性、优缺点，内部是如何实现的，动手实现 Promise</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_24-实现-promise-all" class="sidebar-link">24.实现 Promise.all</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_25-react-组件通信方式" class="sidebar-link">25.React 组件通信方式</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_26-redux-saga-和-mobx-的比较" class="sidebar-link">26.redux-saga 和 mobx 的比较</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_27-说一下-react-fiber" class="sidebar-link">27.说一下 react-fiber</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_28-手写发布订阅" class="sidebar-link">28.手写发布订阅</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_29-手写数组转树" class="sidebar-link">29.手写数组转树</a></li><li class="sidebar-sub-header"><a href="/lutest/prepare/Collection/03-100面试题上.html#_30-手写用-es6proxy-如何实现-arr-1-的访问" class="sidebar-link">30.手写用 ES6proxy 如何实现 arr[-1] 的访问</a></li></ul></li><li><a href="/lutest/prepare/Collection/04-100面试题下.html" class="sidebar-link">04-100面试题下</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/prepare/Engineering/" class="sidebar-heading clickable"><span>Engineering</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/prepare/Mobile/" class="sidebar-heading clickable"><span>Mobile</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/lutest/prepare/Require/" class="sidebar-heading clickable"><span>Require</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020-最新：100-道有答案的前端面试题（上）"><a href="#_2020-最新：100-道有答案的前端面试题（上）" class="header-anchor">#</a> 2020 最新：100 道有答案的前端面试题（上）</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-1-写一个-mysetinterval-fn-a-b-每次间隔-a-a-b-a-2b-的时间，然后写一个-myclear，停止上面的-mysetinterval">1. 1.写一个 mySetInterVal(fn, a, b),每次间隔 a,a+b,a+2b 的时间，然后写一个 myClear，停止上面的 mySetInterVal</a></li><li><a href="#_2-合并二维有序数组成一维有序数组，归并排序的思路">2.合并二维有序数组成一维有序数组，归并排序的思路</a></li><li><a href="#_3-多种方式实现斐波那契数列">3.多种方式实现斐波那契数列</a></li><li><a href="#_4-字符串出现的不重复最长长度">4.字符串出现的不重复最长长度</a></li><li><a href="#_5-介绍-chrome-浏览器的几个版本">5.介绍 chrome 浏览器的几个版本</a></li><li><a href="#_6-react-项目中有哪些细节可以优化？实际开发中都做过哪些性能优化">6.React 项目中有哪些细节可以优化？实际开发中都做过哪些性能优化</a></li><li><a href="#_7-react-最新版本解决了什么问题-加了哪些东西">7.react 最新版本解决了什么问题 加了哪些东西</a></li><li><a href="#_8-说一下-http-缓存策略，有什么区别，分别解决了什么问题">8.说一下 Http 缓存策略，有什么区别，分别解决了什么问题</a></li><li><a href="#_9-介绍防抖节流原理、区别以及应用，并用-javascript-进行实现">9.介绍防抖节流原理、区别以及应用，并用 JavaScript 进行实现</a></li><li><a href="#_10-前端安全、中间人攻击">10.前端安全、中间人攻击</a></li><li><a href="#_11-对闭包的看法，为什么要用闭包？说一下闭包原理以及应用场景">11.对闭包的看法，为什么要用闭包？说一下闭包原理以及应用场景</a></li><li><a href="#_12-css-伪类与伪元素区别">12.css 伪类与伪元素区别</a></li><li><a href="#_13-有一堆整数，请把他们分成三份，确保每一份和尽量相等（11，42，23，4，5，6-4-5-6-11-23-42-56-78-90）">13.有一堆整数，请把他们分成三份，确保每一份和尽量相等（11，42，23，4，5，6 4 5 6 11 23 42 56 78 90）</a></li><li><a href="#_14-实现-lodash-的-get">14.实现 lodash 的_.get</a></li><li><a href="#_15-实现-add-1-2-3">15.实现 add(1)(2)(3)</a></li><li><a href="#_16-实现链式调用">16.实现链式调用</a></li><li><a href="#_17-react-事件绑定原理">17.React 事件绑定原理</a></li><li><a href="#_18-类数组和数组的区别，dom-的类数组如何转换成数组">18.类数组和数组的区别，dom 的类数组如何转换成数组</a></li><li><a href="#_19-webpack-做过哪些优化，开发效率方面、打包策略方面等等">19.webpack 做过哪些优化，开发效率方面、打包策略方面等等</a></li><li><a href="#_20-说一下事件循环机制-node、浏览器">20.说一下事件循环机制(node、浏览器)</a></li><li><a href="#_21-如何封装-node-中间件">21.如何封装 node 中间件</a></li><li><a href="#_22-node-中间层怎样做的请求合并转发">22.node 中间层怎样做的请求合并转发</a></li><li><a href="#_23-介绍下-promise-的特性、优缺点，内部是如何实现的，动手实现-promise">23.介绍下 promise 的特性、优缺点，内部是如何实现的，动手实现 Promise</a></li><li><a href="#_24-实现-promise-all">24.实现 Promise.all</a></li><li><a href="#_25-react-组件通信方式">25.React 组件通信方式</a></li><li><a href="#_26-redux-saga-和-mobx-的比较">26.redux-saga 和 mobx 的比较</a></li><li><a href="#_27-说一下-react-fiber">27.说一下 react-fiber</a></li><li><a href="#_28-手写发布订阅">28.手写发布订阅</a></li><li><a href="#_29-手写数组转树">29.手写数组转树</a></li><li><a href="#_30-手写用-es6proxy-如何实现-arr-1-的访问">30.手写用 ES6proxy 如何实现 arr[-1] 的访问</a></li></ul></div><p></p> <h2 id="_1-1-写一个-mysetinterval-fn-a-b-每次间隔-a-a-b-a-2b-的时间，然后写一个-myclear，停止上面的-mysetinterval"><a href="#_1-1-写一个-mysetinterval-fn-a-b-每次间隔-a-a-b-a-2b-的时间，然后写一个-myclear，停止上面的-mysetinterval" class="header-anchor">#</a> 1. 1.写一个 mySetInterVal(fn, a, b),每次间隔 a,a+b,a+2b 的时间，然后写一个 myClear，停止上面的 mySetInterVal</h2> <p>公司：头条</p> <p>分类：JavaScript</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mySetInterVal</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>handle <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handle <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>time<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mySetInterVal</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token number">2000</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">MySetInterValReturn</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>Timeout<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> mySetInterVal <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">,</span>
  a<span class="token operator">:</span> number<span class="token punctuation">,</span>
  b<span class="token operator">:</span> number
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">MySetInterValReturn</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeObj<span class="token operator">:</span> MySetInterValReturn <span class="token operator">=</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> helper <span class="token operator">=</span> <span class="token punctuation">(</span>timeout<span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timeObj<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">helper</span><span class="token punctuation">(</span>timeout <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">helper</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> timeObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> myClear <span class="token operator">=</span> <span class="token punctuation">(</span>timeObj<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>Timeout<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 测试用例</span>
<span class="token keyword">const</span> timeObj <span class="token operator">=</span> <span class="token function">mySetInterVal</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">time: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token number">1000</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">myClear</span><span class="token punctuation">(</span>timeObj<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mySetInterVal</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      timeCount<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> a <span class="token operator">+</span> timeCount <span class="token operator">*</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//测试</span>
<span class="token keyword">const</span> myClear <span class="token operator">=</span> <span class="token function">mySetInterVal</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token number">1000</span><span class="token punctuation">,</span>
  <span class="token number">500</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除定时器</span>
<span class="token function">myClear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="_2-合并二维有序数组成一维有序数组，归并排序的思路"><a href="#_2-合并二维有序数组成一维有序数组，归并排序的思路" class="header-anchor">#</a> 2.合并二维有序数组成一维有序数组，归并排序的思路</h2> <p>公司：头条</p> <p>分类：算法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法1：使用concat</span>
<span class="token keyword">const</span> <span class="token function-variable function">flatten1</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 方法2：使用reduce</span>
<span class="token keyword">const</span> <span class="token function-variable function">flatten2</span> <span class="token operator">=</span> <span class="token parameter">arr</span> <span class="token operator">=&gt;</span>
  arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>acc<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token function">flatten2</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>acc<span class="token punctuation">,</span> cur<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// test</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten1</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten2</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 解题思路：
 * 双指针 从头到尾比较 两个数组的第一个值，根据值的大小依次插入到新的数组中
 * 空间复杂度：O(m + n)
 * 时间复杂度：O(m + n)
 * @param {Array} arr1
 * @param {Array} arr2
 */</span>

<span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token parameter">arr1<span class="token punctuation">,</span> arr2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> arr2<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/*shift()方法用于把数组的第一个元素从其中删除，并返回第一个元素的值。*/</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr1<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr2<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">mergeSort</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> lengthArr <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>lengthArr <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> arrayItem1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> arrayItem2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> mergeArr <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>arrayItem1<span class="token punctuation">,</span> arrayItem2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>mergeArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">mergeSort</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">mergeSort</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="_3-多种方式实现斐波那契数列"><a href="#_3-多种方式实现斐波那契数列" class="header-anchor">#</a> 3.多种方式实现斐波那契数列</h2> <p>公司：腾讯、CVTE、微软</p> <p>分类：算法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @description 求斐波那契数列第n项
 * @param {number} n 项目数
 * @return {number} 返回第n项值
 */</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> map<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
  map<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/**
 * @description 求斐波那契数列第n项
 * @param {number} n 项目数
 * @return {number} 返回第n项值
 */</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> cur <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> data<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data <span class="token operator">=</span> pre <span class="token operator">+</span> cur<span class="token punctuation">;</span>
    pre <span class="token operator">=</span> cur<span class="token punctuation">;</span>
    cur <span class="token operator">=</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * @description 求斐波那契数列第n项
 * @param {number} n 项目数
 * @return {number} 返回第n项值
 */</span>
<span class="token keyword">function</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> v1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> v2 <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> v1<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> v2<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> v2<span class="token punctuation">,</span> v1 <span class="token operator">+</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//基础版斐波那契数列</span>
<span class="token keyword">function</span> <span class="token function">fabonacci</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    num2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    sum<span class="token punctuation">;</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
    num1 <span class="token operator">=</span> num2<span class="token punctuation">;</span>
    num2 <span class="token operator">=</span> sum<span class="token punctuation">;</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//基于ES6 Generator实现</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fabonacciG</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> a <span class="token operator">+</span> b<span class="token punctuation">]</span><span class="token punctuation">;</span>
    n<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="_4-字符串出现的不重复最长长度"><a href="#_4-字符串出现的不重复最长长度" class="header-anchor">#</a> 4.字符串出现的不重复最长长度</h2> <p>公司：腾讯</p> <p>分类：算法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @param {string} s
 * @return {number}
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">lengthOfLongestSubstring</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> cur<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>total<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> total <span class="token operator">+</span> cur<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">&lt;</span> total<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res <span class="token operator">=</span> total<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">return</span> total<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>total<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> total<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">+</span> cur<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> total<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>total<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> total<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">+</span> cur<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">&lt;</span> result<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">=</span> result<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span><span class="token string">&quot;loddktdji&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span><span class="token string">&quot;dvdf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span><span class="token string">&quot;adfafwefffdasdcx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 题目：字符串出现的不重复最长长度
 * 整体思路：
 * 用一个滑动窗口装没有重复的字符，枚举字符记录最大值即可
 * 对于遇到重复字符如何收缩窗口大小？
 * 我们可以用 map 维护字符的索引，遇到相同的字符，把左边界移动过去即可
 * 挪动的过程中记录最大长度
 */</span>
<span class="token keyword">var</span> <span class="token function-variable function">lengthOfLongestSubstring</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> j <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">lengthOfLongestSubstring</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> max<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">lengthOfLongestSubString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>right <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      left <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> right <span class="token operator">-</span> left <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span>
    right<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">lengthOfLongestSubString</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">lengthOfLongestSubString</span><span class="token punctuation">(</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">assert</span><span class="token punctuation">(</span><span class="token function">lengthOfLongestSubString</span><span class="token punctuation">(</span><span class="token string">&quot;aabc&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_5-介绍-chrome-浏览器的几个版本"><a href="#_5-介绍-chrome-浏览器的几个版本" class="header-anchor">#</a> 5.介绍 chrome 浏览器的几个版本</h2> <p>公司：滴滴</p> <p>分类：网络&amp;安全</p> <p>1）Chrome 浏览器提供 4 种发布版本，即稳定版(Stable)、测试版(Beta)、开发者版(Dev)和金丝雀版(Canary)。
虽然 Chrome 这几个版本名称各不相同，但都沿用了相同的版本号，只是更新早晚的区别。就好比 iOS 等系统，Beta 版可以率先更新到 iOS 12 并进行测试，不断改进稳定后，正式版才升级到 12 版本。<br>
Chrome 也是如此，更新最快的 Canary 会领先正式版 1-2 个版本。</p> <ul><li><p>1.Canary（金丝雀） 版</p> <ul><li>只限用于测试，Canary 是 Chrome 的未来版本，是功能、代码最先进的 Chrome 版本，一方面软件本身没有足够时间测试，另一方面网页也不一定支持这些全新的功能，因此极不稳定。好在，谷歌将其设定为可独立安装、与其他版本的 Chrome 程序共存，因此适合进阶用户安装备用，尝鲜最新功能。这种不稳定性使得 Canary 版目前并不适合日常使用。</li> <li>Chrome Canary 是更新速度最快的 Chrome 版本，几乎每天更新。它相当于支持自动更新、并添加了谷歌自家服务与商业闭源插件（Flash 等）的 Chromium，更加强大好用。</li></ul></li> <li><p>2.开发者版(Dev)</p> <ul><li>Chrome Dev 最初是以 Chromium 为基础、更新最快的 Chrome，后来则被 Canary 取代。Dev 版每周更新一次，虽然仍不太稳定，但已经可以勉强满足日常使用，适合 Web 开发者用来测试新功能和网页。</li> <li>让 IT 人员使用开发者版，开发者可以通过开发者版测试自己公司的应用，确保这些应用能与 Chrome 最新的 API 更改及功能更改兼容。注意：开发者版并非百分之百稳定，但开发者可以提前 9 至 12 周体验即将添加到 Chrome 稳定版的功能。</li></ul></li> <li><p>3.测试版(Beta)</p> <ul><li>Chrome Beta 以 Dev 为基础，每月更新一次。它是正式发布前的最后测试版本，所有功能都已在前面几个版本中得到测试并改进，因此已经十分稳定，普通用户也可以用来日常使用</li> <li>让 5% 的用户使用测试版，测试版用户可以提前 4-6 周体验即将在 Chrome 稳定版中推出的功能。测试版用户可以发现特定版本可能存在的问题，让您可以先解决问题，然后再向所有用户推出该版本。</li></ul></li> <li><p>4.稳定版(Stable)</p> <ul><li>最后的 Chrome Stable 就是我们熟知的正式版，它以 Beta 为基础，几个月更新一次。由于所有的功能都已经过数个月反复测试，是稳定性最高的 Chrome 版本。</li> <li>让大多数用户使用稳定版，稳定版是已进行充分测试的版本，稳定版每 2-3 周会进行一次小幅更新，并且每 6 周会进行一次重大更新。</li></ul></li></ul> <p>所以要定期下载开发者版，体验 Chrome 最新的 API 和新功能 ，发现自己的应用跟新 API 和新功能的是否有兼容问题，找到开发亮点。</p> <p>2）对于 Chrome 的历史版本测试<br>
可以使用 Docker Selenium 做分布式自动化测试，部署多个重点关注的版本，进行自动化测试，对比差异。</p> <h2 id="_6-react-项目中有哪些细节可以优化？实际开发中都做过哪些性能优化"><a href="#_6-react-项目中有哪些细节可以优化？实际开发中都做过哪些性能优化" class="header-anchor">#</a> 6.React 项目中有哪些细节可以优化？实际开发中都做过哪些性能优化</h2> <p>公司：滴滴、掌门一对一、网易、有赞、沪江、喜马拉雅、酷家乐、快手</p> <p>分类：React</p> <p>1）对于正常的项目优化，一般都涉及到几个方面，<strong>开发过程中</strong>、<strong>上线之后的首屏</strong>、<strong>运行过程的状态</strong></p> <ul><li><p>来聊聊上线之后的首屏及运行状态：</p> <ul><li><p>首屏优化一般涉及到几个指标 FP、FCP、FMP；要有一个良好的体验是尽可能的把 FCP 提前，需要做一些工程化的处理，去优化资源的加载</p></li> <li><p>方式及分包策略，资源的减少是最有效的加快首屏打开的方式；</p></li> <li><p>对于 CSR 的应用，FCP 的过程一般是首先加载 js 与 css 资源，js 在本地执行完成，然后加载数据回来，做内容初始化渲染，这中间就有几次的网络反复请求的过程；所以 CSR 可以考虑使用骨架屏及预渲染（部分结构预渲染）、suspence 与 lazy 做懒加载动态组件的方式</p></li> <li><p>当然还有另外一种方式就是 SSR 的方式，SSR 对于首屏的优化有一定的优势，但是这种瓶颈一般在 Node 服务端的处理，建议使用 stream 流的方式来处理，对于体验与 node 端的内存管理等，都有优势；</p></li> <li><p>不管对于 CSR 或者 SSR，都建议配合使用 Service worker，来控制资源的调配及骨架屏秒开的体验</p></li> <li><p>react 项目上线之后，首先需要保障的是可用性，所以可以通过 React.Profiler 分析组件的渲染次数及耗时的一些任务，但是 Profile 记录的是 commit 阶段的数据，所以对于 react 的调和阶段就需要结合 performance API 一起分析；</p></li> <li><p>由于 React 是父级 props 改变之后，所有与 props 不相关子组件在没有添加条件控制的情况之下，也会触发 render 渲染，这是没有必要的，可以结合 React 的 PureComponent 以及 React.memo 等做浅比较处理，这中间有涉及到不可变数据的处理，当然也可以结合使用 ShouldComponentUpdate 做深比较处理；</p></li> <li><p>所有的运行状态优化，都是减少不必要的 render，React.useMemo 与 React.useCallback 也是可以做很多优化的地方；</p></li> <li><p>在很多应用中，都会涉及到使用 redux 以及使用 context，这两个都可能造成许多不必要的 render，所以在使用的时候，也需要谨慎的处理一些数据；</p></li> <li><p>最后就是保证整个应用的可用性，为组件创建错误边界，可以使用 componentDidCatch 来处理；</p></li></ul></li> <li><p>实际项目中开发过程中还有很多其他的优化点：</p> <ul><li>1.保证数据的不可变性</li> <li>2.使用唯一的键值迭代</li> <li>3.使用 web worker 做密集型的任务处理</li> <li>4.不在 render 中处理数据</li> <li>5.不必要的标签，使用 React.Fragments</li></ul></li></ul> <h2 id="_7-react-最新版本解决了什么问题-加了哪些东西"><a href="#_7-react-最新版本解决了什么问题-加了哪些东西" class="header-anchor">#</a> 7.react 最新版本解决了什么问题 加了哪些东西</h2> <p>公司：滴滴</p> <p>分类：React</p> <p>1）React 16.x 的三大新特性 Time Slicing, Suspense，hooks</p> <ul><li><ol><li>Time Slicing（解决 CPU 速度问题）使得在执行任务的期间可以随时暂停，跑去干别的事情，这个特性使得 react 能在性能极其差的机器跑时，仍然保持有良好的性能</li></ol></li> <li><ol start="2"><li>Suspense （解决网络 IO 问题）和 lazy 配合，实现异步加载组件。 能暂停当前组件的渲染, 当完成某件事以后再继续渲染，解决从 react 出生到现在都存在的「异步副作用」的问题，而且解决得非</li></ol></li> <li>的优雅，使用的是「异步但是同步的写法」，我个人认为，这是最好的解决异步问题的方式</li> <li><ol start="3"><li>此外，还提供了一个内置函数 componentDidCatch，当有错误发生时, 我们可以友好地展示 fallback 组件；可以捕捉到它的子元素（包括嵌套子元素）抛出的异常；可以复用错误组件。</li></ol></li></ul> <p>2）React16.8</p> <ul><li>加入 hooks，让 React 函数式组件更加灵活</li> <li>hooks 之前，React 存在很多问题
<ul><li><ol><li>在组件间复用状态逻辑很难</li></ol></li> <li><ol start="2"><li>复杂组件变得难以理解，高阶组件和函数组件的嵌套过深。</li></ol></li> <li><ol start="3"><li>class 组件的 this 指向问题</li></ol></li> <li><ol start="4"><li>难以记忆的生命周期</li></ol></li></ul></li> <li>hooks 很好的解决了上述问题，hooks 提供了很多方法
<ul><li><ol><li>useState 返回有状态值，以及更新这个状态值的函数</li></ol></li> <li><ol start="2"><li>useEffect 接受包含命令式，可能有副作用代码的函数。</li></ol></li> <li><ol start="3"><li>useContext 接受上下文对象（从 React.createContext 返回的值）并返回当前上下文值，</li></ol></li> <li><ol start="4"><li>useReducer useState 的替代方案。接受类型为(state，action) =&gt; newState 的 reducer，并返回与 dispatch 方法配对的当前状态。</li></ol></li> <li><ol start="5"><li>useCallback 返回一个回忆的 memoized 版本，该版本仅在其中一个输入发生更改时才会更改。纯函数的输入输出确定性</li></ol></li> <li><ol start="6"><li>useMemo 纯的一个记忆函数</li></ol></li> <li><ol start="7"><li>useRef 返回一个可变的 ref 对象，其.current 属性被初始化为传递的参数</li></ol></li> <li><ol start="8"><li>useImperativeMethods 自定义使用 ref 时公开给父组件的实例值</li></ol></li> <li><ol start="9"><li>useMutationEffect 更新兄弟组件之前，它在 React 执行其 DOM 改变的同一阶段同步触发</li></ol></li> <li><ol start="10"><li>useLayoutEffect DOM 改变后同步触发。使用它来从 DOM 读取布局并同步重新渲染</li></ol></li></ul></li></ul> <p>3）React16.9</p> <ul><li><ol><li>重命名 Unsafe 的生命周期方法。新的 UNSAFE_ 前缀将有助于在代码 review 和 debug 期间，使这些有问题的字样更突出</li></ol></li> <li><ol start="2"><li>废弃 javascript: 形式的 URL。以 javascript: 开头的 URL 非常容易遭受攻击，造成安全漏洞。</li></ol></li> <li><ol start="3"><li>废弃 “Factory” 组件。 工厂组件会导致 React 变大且变慢。</li></ol></li> <li><ol start="4"><li>act() 也支持异步函数，并且你可以在调用它时使用 await。</li></ol></li> <li><ol start="5"><li>使用 &lt;React.Profiler&gt; 进行性能评估。 在较大的应用中追踪性能回归可能会很方便</li></ol></li></ul> <p>4）React16.13.0</p> <ul><li><ol><li>支持在渲染期间调用 setState，但仅适用于同一组件</li></ol></li> <li><ol start="2"><li>可检测冲突的样式规则并记录警告</li></ol></li> <li><ol start="3"><li>废弃 unstable_createPortal，使用 createPortal</li></ol></li> <li><ol start="4"><li>将组件堆栈添加到其开发警告中，使开发人员能够隔离 bug 并调试其程序，这可以清楚地说明问题所在，并更快地定位和修复错误。</li></ol></li></ul> <h2 id="_8-说一下-http-缓存策略，有什么区别，分别解决了什么问题"><a href="#_8-说一下-http-缓存策略，有什么区别，分别解决了什么问题" class="header-anchor">#</a> 8.说一下 Http 缓存策略，有什么区别，分别解决了什么问题</h2> <p>公司：滴滴、头条、网易、易车、脉脉、掌门一对一、虎扑、挖财、爱范儿</p> <p>分类：网络&amp;安全</p> <p><strong>1）浏览器缓存策略</strong></p> <p>浏览器每次发起请求时，先在本地缓存中查找结果以及缓存标识，根据缓存标识来判断是否使用本地缓存。如果缓存有效，则使
用本地缓存；否则，则向服务器发起请求并携带缓存标识。根据是否需向服务器发起 HTTP 请求，将缓存过程划分为两个部分：
强制缓存和协商缓存，强缓优先于协商缓存。</p> <ul><li>强缓存，服务器通知浏览器一个缓存时间，在缓存时间内，下次请求，直接用缓存，不在时间内，执行比较缓存策略。</li> <li>协商缓存，让客户端与服务器之间能实现缓存文件是否更新的验证、提升缓存的复用率，将缓存信息中的 Etag 和 Last-Modified
通过请求发送给服务器，由服务器校验，返回 304 状态码时，浏览器直接使用缓存。</li></ul> <p>HTTP 缓存都是从第二次请求开始的：</p> <ul><li>第一次请求资源时，服务器返回资源，并在 response header 中回传资源的缓存策略；</li> <li>第二次请求时，浏览器判断这些请求参数，击中强缓存就直接 200，否则就把请求参数加到 request header 头中传给服务器，看是否击中协商缓存，击中则返回 304，否则服务器会返回新的资源。这是缓存运作的一个整体流程图：</li></ul> <div align="center"><img src="/lutest/images/prepare/collection/2020071501.png" alt="prepare/collection/2020071501.png"></div> <p><strong>2）强缓存</strong></p> <ul><li>强缓存命中则直接读取浏览器本地的资源，在 network 中显示的是 from memory 或者 from disk</li> <li>控制强制缓存的字段有：Cache-Control（http1.1）和 Expires（http1.0）</li> <li>Cache-control 是一个相对时间，用以表达自上次请求正确的资源之后的多少秒的时间段内缓存有效。</li> <li>Expires 是一个绝对时间。用以表达在这个时间点之前发起请求可以直接从浏览器中读取数据，而无需发起请求</li> <li>Cache-Control 的优先级比 Expires 的优先级高。前者的出现是为了解决 Expires 在浏览器时间被手动更改导致缓存判断错误的问题。
如果同时存在则使用 Cache-control。</li></ul> <p><strong>3）强缓存-expires</strong></p> <ul><li><p>该字段是服务器响应消息头字段，告诉浏览器在过期时间之前可以直接从浏览器缓存中存取数据。</p></li> <li><p>Expires 是 HTTP 1.0 的字段，表示缓存到期时间，是一个绝对的时间 (当前时间+缓存时间)。在响应消息头中，设置这个字段之后，就可以告诉浏览器，在未过期之前不需要再次请求。</p></li> <li><p>由于是绝对时间，用户可能会将客户端本地的时间进行修改，而导致浏览器判断缓存失效，重新请求该资源。此外，即使不考虑修改，时差或者误差等因素也可能造成客户端与服务端的时间不一致，致使缓存失效。</p></li> <li><p>优势特点</p> <ul><li>1、HTTP 1.0 产物，可以在 HTTP 1.0 和 1.1 中使用，简单易用。</li> <li>2、以时刻标识失效时间。</li></ul></li> <li><p>劣势问题</p> <ul><li>1、时间是由服务器发送的(UTC)，如果服务器时间和客户端时间存在不一致，可能会出现问题。</li> <li>2、存在版本问题，到期之前的修改客户端是不可知的。</li></ul></li></ul> <p><strong>4）强缓存-cache-control</strong></p> <ul><li><p>已知 Expires 的缺点之后，在 HTTP/1.1 中，增加了一个字段 Cache-control，该字段表示资源缓存的最大有效时间，在该时间内，客户端不需要向服务器发送请求。</p></li> <li><p>这两者的区别就是前者是绝对时间，而后者是相对时间。下面列举一些 <code>Cache-control</code> 字段常用的值：(完整的列表可以查看 MDN)</p> <ul><li><code>max-age</code>：即最大有效时间。</li> <li><code>must-revalidate</code>：如果超过了 <code>max-age</code> 的时间，浏览器必须向服务器发送请求，验证资源是否还有效。</li> <li><code>no-cache</code>：不使用强缓存，需要与服务器验证缓存是否新鲜。</li> <li><code>no-store</code>: 真正意义上的“不要缓存”。所有内容都不走缓存，包括强制和对比。</li> <li><code>public</code>：所有的内容都可以被缓存 (包括客户端和代理服务器， 如 CDN)</li> <li><code>private</code>：所有的内容只有客户端才可以缓存，代理服务器不能缓存。默认值。</li></ul></li> <li><p><strong>Cache-control 的优先级高于 Expires</strong>，为了兼容 HTTP/1.0 和 HTTP/1.1，实际项目中两个字段都可以设置。</p></li> <li><p>该字段可以在请求头或者响应头设置，可组合使用多种指令：</p> <ul><li><strong>可缓存性</strong>：
<ul><li>public：default，浏览器和缓存服务器都可以缓存页面信息</li> <li>private：代理服务器不可缓存，只能被单个用户缓存</li> <li>no-cache：浏览器器和服务器都不应该缓存页面信息，但仍可缓存，只是在缓存前需要向服务器确认资源是否被更改。可配合 private，
过期时间设置为过去时间。</li> <li>only-if-cache：客户端只接受已缓存的响应</li></ul></li> <li><strong>到期</strong> <ul><li>max-age=<seconds>：缓存存储的最大周期，超过这个周期被认为过期。</seconds></li> <li>s-maxage=<seconds>：设置共享缓存，比如 can。会覆盖 max-age 和 expires。</seconds></li> <li>max-stale[=<seconds>]：客户端愿意接收一个已经过期的资源</seconds></li> <li>min-fresh=<seconds>：客户端希望在指定的时间内获取最新的响应</seconds></li> <li>stale-while-revalidate=<seconds>：客户端愿意接收陈旧的响应，并且在后台一部检查新的响应。时间代表客户端愿意接收陈旧响应
的时间长度。</seconds></li> <li>stale-if-error=<seconds>：如新的检测失败，客户端则愿意接收陈旧的响应，时间代表等待时间。</seconds></li></ul></li> <li><strong>重新验证和重新加载</strong> <ul><li>must-revalidate：如页面过期，则去服务器进行获取。</li> <li>proxy-revalidate：用于共享缓存。</li> <li>immutable：响应正文不随时间改变。</li></ul></li> <li><strong>其他</strong> <ul><li>no-store：绝对禁止缓存</li> <li>no-transform：不得对资源进行转换和转变。例如，不得对图像格式进行转换。</li></ul></li></ul></li> <li><p>优势特点</p> <ul><li>1、HTTP 1.1 产物，以时间间隔标识失效时间，解决了 Expires 服务器和客户端相对时间的问题。</li> <li>2、比 Expires 多了很多选项设置。</li></ul></li> <li><p>劣势问题</p> <ul><li>1、存在版本问题，到期之前的修改客户端是不可知的。</li></ul></li></ul> <p><strong>5）协商缓存</strong></p> <ul><li>协商缓存的状态码由服务器决策返回 200 或者 304</li> <li>当浏览器的强缓存失效的时候或者请求头中设置了不走强缓存，并且在请求头中设置了 If-Modified-Since 或者 If-None-Match 的时候，会将这两个属性值到服务端去验证是否命中协商缓存，如果命中了协商缓存，会返回 304 状态，加载浏览器缓存，并且响应头会设置 Last-Modified 或者 ETag 属性。</li> <li>对比缓存在请求数上和没有缓存是一致的，但如果是 304 的话，返回的仅仅是一个状态码而已，并没有实际的文件内容，因此 在响应体体积上的节省是它的优化点。</li> <li>协商缓存有 2 组字段(不是两个)，控制协商缓存的字段有：Last-Modified/If-Modified-since（http1.0）和 Etag/If-None-match（http1.1）</li> <li>Last-Modified/If-Modified-since 表示的是服务器的资源最后一次修改的时间；Etag/If-None-match 表示的是服务器资源的唯一标
识，只要资源变化，Etag 就会重新生成。</li> <li>Etag/If-None-match 的优先级比 Last-Modified/If-Modified-since 高。</li></ul> <p><strong>6）协商缓存-协商缓存-Last-Modified/If-Modified-since</strong></p> <ul><li>1.服务器通过 <code>Last-Modified</code> 字段告知客户端，资源最后一次被修改的时间，例如 <code>Last-Modified: Mon, 10 Nov 2018 09:10:11 GMT</code></li> <li>2.浏览器将这个值和内容一起记录在缓存数据库中。</li> <li>3.下一次请求相同资源时时，浏览器从自己的缓存中找出“不确定是否过期的”缓存。因此在请求头中将上次的 <code>Last-Modified</code> 的值写入到请求头的 <code>If-Modified-Since</code> 字段</li> <li>4.服务器会将 <code>If-Modified-Since</code> 的值与 <code>Last-Modified</code> 字段进行对比。如果相等，则表示未修改，响应 304；反之，则表示修改了，响应 200 状态码，并返回数据。</li> <li>优势特点
<ul><li>1、不存在版本问题，每次请求都会去服务器进行校验。服务器对比最后修改时间如果相同则返回 304，不同返回 200 以及资源内容。</li></ul></li> <li>劣势问题
<ul><li>2、只要资源修改，无论内容是否发生实质性的变化，都会将该资源返回客户端。例如周期性重写，这种情况下该资源包含的数据实际上一样的。</li> <li>3、以时刻作为标识，无法识别一秒内进行多次修改的情况。 如果资源更新的速度是秒以下单位，那么该缓存是不能被使用的，因为它的时间单位最低是秒。</li> <li>4、某些服务器不能精确的得到文件的最后修改时间。</li> <li>5、如果文件是通过服务器动态生成的，那么该方法的更新时间永远是生成的时间，尽管文件可能没有变化，所以起不到缓存的作用。</li></ul></li></ul> <p><strong>7）协商缓存-Etag/If-None-match</strong></p> <ul><li>为了解决上述问题，出现了一组新的字段 <code>Etag</code> 和 <code>If-None-Match</code></li> <li><code>Etag</code> 存储的是文件的特殊标识(一般都是 hash 生成的)，服务器存储着文件的 <code>Etag</code> 字段。之后的流程和 <code>Last-Modified</code> 一致，只是 <code>Last-Modified</code> 字段和它所表示的更新时间改变成了 <code>Etag</code> 字段和它所表示的文件 hash，把 <code>If-Modified-Since</code> 变成了 <code>If-None-Match</code>。服务器同样进行比较，命中返回 304, 不命中返回新资源和 200。</li> <li>浏览器在发起请求时，服务器返回在 Response header 中返回请求资源的唯一标识。在下一次请求时，会将上一次返回的 Etag 值赋值给 If-No-Matched 并添加在 Request Header 中。服务器将浏览器传来的 if-no-matched 跟自己的本地的资源的 ETag 做对比，如果匹配，则返回 304 通知浏览器读取本地缓存，否则返回 200 和更新后的资源。</li> <li><strong>Etag 的优先级高于 Last-Modified</strong>。</li> <li>优势特点
<ul><li>1、可以更加精确的判断资源是否被修改，可以识别一秒内多次修改的情况。</li> <li>2、不存在版本问题，每次请求都回去服务器进行校验。</li></ul></li> <li>劣势问题
<ul><li>1、计算 ETag 值需要性能损耗。</li> <li>2、分布式服务器存储的情况下，计算 ETag 的算法如果不一样，会导致浏览器从一台服务器上获得页面内容后到另外一台服务器上进行验证时现 ETag 不匹配的情况。</li></ul></li></ul> <h2 id="_9-介绍防抖节流原理、区别以及应用，并用-javascript-进行实现"><a href="#_9-介绍防抖节流原理、区别以及应用，并用-javascript-进行实现" class="header-anchor">#</a> 9.介绍防抖节流原理、区别以及应用，并用 JavaScript 进行实现</h2> <p>公司：滴滴、虎扑、挖财、58、头条</p> <p>分类：JavaScript、编程题</p> <p>1）防抖</p> <ul><li>原理：在事件被触发 n 秒后再执行回调，如果在这 n 秒内又被触发，则重新计时。</li> <li>适用场景：
<ul><li>按钮提交场景：防止多次提交按钮，只执行最后提交的一次</li> <li>搜索框联想场景：防止联想发送请求，只发送最后一次输入</li></ul></li> <li>简易版实现</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeout<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>立即执行版实现
<ul><li>有时希望立刻执行函数，然后等到停止触发 n 秒后，才可以重新触发执行。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 有时希望立刻执行函数，然后等到停止触发 n 秒后，才可以重新触发执行。</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeout<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timeout<span class="token punctuation">;</span>
      timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>返回值版实现
<ul><li>func 函数可能会有返回值，所以需要返回函数结果，但是当 immediate 为 false 的时候，因为使用了 setTimeout ，我们将 func.apply(context, args) 的返回值赋给变量，最后再 return 的时候，值将会一直是 undefined，所以只在 immediate 为 true 的时候返回函数的执行结果。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeout<span class="token punctuation">,</span> result<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timeout<span class="token punctuation">;</span>
      timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> result <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>2）节流</p> <ul><li>原理：规定在一个单位时间内，只能触发一次函数。如果这个单位时间内触发多次函数，只有一次生效。</li> <li>适用场景
<ul><li>拖拽场景：固定时间内只执行一次，防止超高频次触发位置变动</li> <li>缩放场景：监控浏览器 resize</li></ul></li> <li>使用时间戳实现
<ul><li>使用时间戳，当触发事件的时候，我们取出当前的时间戳，然后减去之前的时间戳(最一开始值设为 0 )，如果大于设置的时间周期，就执行函数，然后更新时间戳为当前的时间戳，如果小于，就不执行。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> context<span class="token punctuation">,</span> args<span class="token punctuation">;</span>
  <span class="token keyword">let</span> previous <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> previous <span class="token operator">&gt;</span> wait<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      previous <span class="token operator">=</span> now<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>使用定时器实现
<ul><li>当触发事件的时候，我们设置一个定时器，再触发事件的时候，如果定时器存在，就不执行，直到定时器执行，然后执行函数，清空定时器，这样就可以设置下个定时器。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeout<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        timeout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_10-前端安全、中间人攻击"><a href="#_10-前端安全、中间人攻击" class="header-anchor">#</a> 10.前端安全、中间人攻击</h2> <p>公司：滴滴</p> <p>分类：网络&amp;安全</p> <h4 id="_1）xss：跨站脚本攻击"><a href="#_1）xss：跨站脚本攻击" class="header-anchor">#</a> 1）XSS：跨站脚本攻击</h4> <p>就是攻击者想尽一切办法将可以执行的代码注入到网页中。</p> <h5 id="存储型（server-端）："><a href="#存储型（server-端）：" class="header-anchor">#</a> 存储型（server 端）：</h5> <ul><li>场景：见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等。</li> <li>攻击步骤：
<ul><li>i）攻击者将恶意代码提交到目标网站的数据库中</li> <li>ii）用户打开目标网站时，服务端将恶意代码从数据库中取出来，拼接在 HTML 中返回给浏览器</li> <li>iii）用户浏览器在收到响应后解析执行，混在其中的恶意代码也同时被执行</li> <li>iv）恶意代码窃取用户数据，并发送到指定攻击者的网站，或者冒充用户行为，调用目标网站的接口，执行恶意操作</li></ul></li></ul> <h5 id="反射型（server-端）"><a href="#反射型（server-端）" class="header-anchor">#</a> 反射型（Server 端）</h5> <p>与存储型的区别在于，存储型的恶意代码存储在数据库中，反射型的恶意代码在 URL 上</p> <ul><li>场景：通过 URL 传递参数的功能，如网站搜索、跳转等。</li> <li>攻击步骤：
<ul><li>i）攻击者构造出特殊的 URL，其中包含恶意代码。</li> <li>ii）用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。</li> <li>iii）用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。</li> <li>iv）恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。</li></ul></li></ul> <h5 id="dom-型-浏览器端）"><a href="#dom-型-浏览器端）" class="header-anchor">#</a> Dom 型(浏览器端）</h5> <p>DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成，属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞。</p> <ul><li>场景：通过 URL 传递参数的功能，如网站搜索、跳转等。</li> <li>攻击步骤：
<ul><li>i）攻击者构造出特殊的 URL，其中包含恶意代码。</li> <li>ii）用户打开带有恶意代码的 URL。</li> <li>iii）用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。</li> <li>iv）恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。</li></ul></li></ul> <h5 id="预防方案：（防止攻击者提交恶意代码，防止浏览器执行恶意代码）"><a href="#预防方案：（防止攻击者提交恶意代码，防止浏览器执行恶意代码）" class="header-anchor">#</a> 预防方案：（防止攻击者提交恶意代码，防止浏览器执行恶意代码）</h5> <ul><li>i）对数据进行严格的输出编码：如 HTML 元素的编码，JS 编码，CSS 编码，URL 编码等等
<ul><li>避免拼接 HTML；Vue/React 技术栈，避免使用 v-html / dangerouslySetInnerHTML</li></ul></li> <li>ii）CSP HTTP Header，即 Content-Security-Policy、X-XSS-Protection
<ul><li>增加攻击难度，配置 CSP(本质是建立白名单，由浏览器进行拦截)</li> <li><code>Content-Security-Policy: default-src 'self'</code>-所有内容均来自站点的同一个源（不包括其子域名）</li> <li><code>Content-Security-Policy: default-src 'self' *.trusted.com</code>-允许内容来自信任的域名及其子域名 (域名不必须与 CSP 设置所在的域名相同)</li> <li><code>Content-Security-Policy: default-src https://yideng.com</code>-该服务器仅允许通过 HTTPS 方式并仅从 yideng.com 域名来访问文档</li></ul></li> <li>iii）输入验证：比如一些常见的数字、URL、电话号码、邮箱地址等等做校验判断</li> <li>iv）开启浏览器 XSS 防御：Http Only cookie，禁止 JavaScript 读取某些敏感 Cookie，攻击者完成 XSS 注入后也无法窃取此 Cookie。</li> <li>v）验证码</li></ul> <h4 id="_2）csrf：跨站请求伪造"><a href="#_2）csrf：跨站请求伪造" class="header-anchor">#</a> 2）CSRF：跨站请求伪造</h4> <p>攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。</p> <h5 id="攻击流程举例"><a href="#攻击流程举例" class="header-anchor">#</a> 攻击流程举例</h5> <ul><li>i）受害者登录 a.com，并保留了登录凭证（Cookie）</li> <li>ii）攻击者引诱受害者访问了 b.com</li> <li>iii）b.com 向 a.com 发送了一个请求：a.com/act=xx 浏览器会默认携带 a.com 的 Cookie</li> <li>iv）a.com 接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求</li> <li>v）a.com 以受害者的名义执行了 act=xx</li> <li>vi）攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让 a.com 执行了自己定义的操作</li></ul> <h5 id="攻击类型"><a href="#攻击类型" class="header-anchor">#</a> 攻击类型</h5> <ul><li>i）GET 型：如在页面的某个 img 中发起一个 get 请求</li> <li>ii）POST 型：通过自动提交表单到恶意网站</li> <li>iii）链接型：需要诱导用户点击链接</li></ul> <h5 id="预防方案："><a href="#预防方案：" class="header-anchor">#</a> 预防方案：</h5> <p>CSRF 通常从第三方网站发起，被攻击的网站无法防止攻击发生，只能通过增强自己网站针对 CSRF 的防护能力来提升安全性。）</p> <ul><li>i）同源检测：通过 Header 中的 Origin Header 、Referer Header 确定，但不同浏览器可能会有不一样的实现，不能完全保证</li> <li>ii）CSRF Token 校验：将 CSRF Token 输出到页面中（通常保存在 Session 中），页面提交的请求携带这个 Token，服务器验证 Token 是否
正确</li> <li>iii）双重 cookie 验证：
<ul><li>流程：
<ul><li>步骤 1：在用户访问网站页面时，向请求域名注入一个 Cookie，内容为随机字符串（例如 csrfcookie=v8g9e4ksfhw）</li> <li>步骤 2：在前端向后端发起请求时，取出 Cookie，并添加到 URL 的参数中（接上例 POST https://www.a.com/comment?csrfcookie=v8g9e4ksfhw）</li> <li>步骤 3：后端接口验证 Cookie 中的字段与 URL 参数中的字段是否一致，不一致则拒绝。</li></ul></li> <li>优点：
<ul><li>无需使用 Session，适用面更广，易于实施。</li> <li>Token 储存于客户端中，不会给服务器带来压力。</li> <li>相对于 Token，实施成本更低，可以在前后端统一拦截校验，而不需要一个个接口和页面添加。</li></ul></li> <li>缺点：
-Cookie 中增加了额外的字段。 -如果有其他漏洞（例如 XSS），攻击者可以注入 Cookie，那么该防御方式失效。 -难以做到子域名的隔离。 -为了确保 Cookie 传输安全，采用这种防御方式的最好确保用整站 HTTPS 的方式，如果还没切 HTTPS 的使用这种方式也会有风险。</li></ul></li> <li>iv）Samesite Cookie 属性：Google 起草了一份草案来改进 HTTP 协议，那就是为 Set-Cookie 响应头新增 Samesite 属性，它用来标明这个 Cookie 是个“同站 Cookie”，同站 Cookie 只能作为第一方 Cookie，不能作为第三方 Cookie，Samesite 有两个属性值，Strict 为任何情况下都不可以作为第三方 Cookie ，Lax 为可以作为第三方 Cookie , 但必须是 Get 请求</li></ul> <h4 id="_3）iframe-安全"><a href="#_3）iframe-安全" class="header-anchor">#</a> 3）iframe 安全</h4> <h5 id="说明："><a href="#说明：" class="header-anchor">#</a> 说明：</h5> <ul><li>i）嵌入第三方 iframe 会有很多不可控的问题，同时当第三方 iframe 出现问题或是被劫持之后，也会诱发安全性问题</li> <li>ii）点击劫持
<ul><li>攻击者将目标网站通过 iframe 嵌套的方式嵌入自己的网页中，并将 iframe 设置为透明，诱导用户点击。</li></ul></li> <li>iii）禁止自己的 iframe 中的链接外部网站的 JS</li></ul> <h5 id="预防方案：-2"><a href="#预防方案：-2" class="header-anchor">#</a> 预防方案：</h5> <ul><li>i）为 iframe 设置 sandbox 属性，通过它可以对 iframe 的行为进行各种限制，充分实现“最小权限“原则</li> <li>ii）服务端设置 X-Frame-Options Header 头，拒绝页面被嵌套，X-Frame-Options 是 HTTP 响应头中用来告诉浏览器一个页面是否可以嵌入 <iframe> 中
<ul><li>eg.<code>X-Frame-Options: SAMEORIGIN</code></li> <li>SAMEORIGIN: iframe 页面的地址只能为同源域名下的页面</li> <li>ALLOW-FROM: 可以嵌套在指定来源的 iframe 里</li> <li>DENY: 当前页面不能被嵌套在 iframe 里</li></ul></iframe></li> <li>iii）设置 CSP 即 Content-Security-Policy 请求头</li> <li>iv）减少对 iframe 的使用</li></ul> <h4 id="_4）错误的内容推断"><a href="#_4）错误的内容推断" class="header-anchor">#</a> 4）错误的内容推断</h4> <h5 id="说明：-2"><a href="#说明：-2" class="header-anchor">#</a> 说明：</h5> <p>文件上传类型校验失败后，导致恶意的 JS 文件上传后，浏览器 Content-Type Header 的默认解析为可执行的 JS 文件</p> <h5 id="预防方案：-3"><a href="#预防方案：-3" class="header-anchor">#</a> 预防方案：</h5> <p>设置 X-Content-Type-Options 头</p> <h4 id="_5）第三方依赖包"><a href="#_5）第三方依赖包" class="header-anchor">#</a> 5）第三方依赖包</h4> <p>减少对第三方依赖包的使用，如之前 npm 的包如：event-stream 被爆出恶意攻击数字货币；</p> <h4 id="_6）https"><a href="#_6）https" class="header-anchor">#</a> 6）HTTPS</h4> <h5 id="描述："><a href="#描述：" class="header-anchor">#</a> 描述：</h5> <p>黑客可以利用 SSL Stripping 这种攻击手段，强制让 HTTPS 降级回 HTTP，从而继续进行中间人攻击。</p> <h5 id="预防方案：-4"><a href="#预防方案：-4" class="header-anchor">#</a> 预防方案：</h5> <p>使用 HSTS（HTTP Strict Transport Security），它通过下面这个 HTTP Header 以及一个预加载的清单，来告知浏览器和网站进行通信的时候强制性的使用 HTTPS，而不是通过明文的 HTTP 进行通信。这里的“强制性”表现为浏览器无论在何种情况下都直接向务器端发起 HTTPS 请求，而不再像以往那样从 HTTP 跳转到 HTTPS。另外，当遇到证书或者链接不安全的时候，则首先警告用户，并且不再
用户选择是否继续进行不安全的通信。</p> <h4 id="_7）本地存储数据"><a href="#_7）本地存储数据" class="header-anchor">#</a> 7）本地存储数据</h4> <p>避免重要的用户信息存在浏览器缓存中</p> <h4 id="_8）静态资源完整性校验"><a href="#_8）静态资源完整性校验" class="header-anchor">#</a> 8）静态资源完整性校验</h4> <h5 id="描述"><a href="#描述" class="header-anchor">#</a> 描述</h5> <p>使用 内容分发网络 (CDNs) 在多个站点之间共享脚本和样式表等文件可以提高站点性能并节省带宽。然而，使用 CDN 也存在风险，如果攻击者获得对 CDN 的控制权，则可以将任意恶意内容注入到 CDN 上的文件中 （或完全替换掉文件），因此可能潜在地攻击所有从该 CDN 获取文件的站点。</p> <h5 id="预防方案"><a href="#预防方案" class="header-anchor">#</a> 预防方案</h5> <p>将使用 base64 编码过后的文件哈希值写入你所引用的 <script></script></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lutest/prepare/Collection/02-全面整理.html" class="prev">02-全面整理</a></span> <span class="next"><a href="/lutest/prepare/Collection/04-100面试题下.html">04-100面试题下</a>
      →
    </span></p></div> </main> <span data-v-2ae0ee72></span></div><div class="global-ui"></div></div>
    <script src="/lutest/assets/js/app.3882172a.js" defer></script><script src="/lutest/assets/js/3.8fcedd8d.js" defer></script><script src="/lutest/assets/js/4.4841ff63.js" defer></script><script src="/lutest/assets/js/53.25edc77d.js" defer></script>
  </body>
</html>
